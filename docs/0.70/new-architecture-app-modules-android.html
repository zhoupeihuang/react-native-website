<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-0.70 plugin-docs plugin-id-default docs-doc-id-new-architecture-app-modules-android">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">在 Android 上启用 TurboModule · React Native 中文网</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:image" content="https://reactnative.cn/img/logo-og.png"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:url" content="https://reactnative.cn"><meta data-rh="true" property="og:image" content="img/logo-og.png"><meta data-rh="true" name="docusaurus_version" content="0.70"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.70"><meta data-rh="true" name="docsearch:version" content="0.70"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.70"><meta data-rh="true" property="og:title" content="在 Android 上启用 TurboModule · React Native 中文网"><meta data-rh="true" name="description" content="Make sure your application meets all the prerequisites."><meta data-rh="true" property="og:description" content="Make sure your application meets all the prerequisites."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://reactnative.cn/docs/0.70/new-architecture-app-modules-android"><link data-rh="true" rel="alternate" href="https://reactnative.cn/docs/0.70/new-architecture-app-modules-android" hreflang="en"><link data-rh="true" rel="alternate" href="https://reactnative.cn/docs/0.70/new-architecture-app-modules-android" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://GJGDC5L5HP-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-63485149-4","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-63485149-4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-63485149-4",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="React Native 中文网" href="/opensearch.xml">


<script src="//snack.expo.dev/embed.js" defer="defer"></script>
<script src="//cdn.wwads.cn/js/makemoney.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.d1b6022e.css">
<link rel="preload" href="/assets/js/runtime~main.70a32198.js" as="script">
<link rel="preload" href="/assets/js/main.b1314b11.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_oPtH" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/header_logo.svg" alt="React Native 中文网" class="themedImage_BQGR themedImage--light_HAxW"><img src="/img/header_logo.svg" alt="React Native 中文网" class="themedImage_BQGR themedImage--dark_bGx0"></div><b class="navbar__title text--truncate">React Native 中文网</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/0.70/getting-started">0.70</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/new-architecture-app-modules-android">Next</a></li><li><a class="dropdown__link" href="/docs/new-architecture-app-modules-android">0.71</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.70/new-architecture-app-modules-android">0.70</a></li><li><a class="dropdown__link" href="/docs/0.69/new-architecture-app-modules-android">0.69</a></li><li><a class="dropdown__link" href="/docs/0.68/new-architecture-app-modules-android">0.68</a></li><li><a class="dropdown__link" href="/docs/0.67/new-architecture-app-modules-android">0.67</a></li><li><a class="dropdown__link" href="/versions">所有版本</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">开发文档</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.70/getting-started">入门指南</a></li><li><a class="dropdown__link" href="/docs/0.70/components-and-apis">组件</a></li><li><a class="dropdown__link" href="/docs/0.70/accessibilityinfo">API</a></li><li><a class="dropdown__link" href="/architecture/overview">架构</a></li></ul></div><a href="//time.geekbang.org/column/intro/100110101?code=FAqHFVRUur%2FgAP-yJQWitk9ieF80imRky3PVsIs%2FX6A%3D" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link hot-link">实战课<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="//github.com/reactnativecn/react-native-website/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">讨论<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="//pushy.reactnative.cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link hot-link">热更新<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/about">关于</a><a href="//github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_WqAV"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r docsWrapper_ct1J"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docPage_KLoz"><aside class="theme-doc-sidebar-container docSidebarContainer_y0RQ"><div class="sidebar_CUen"><nav class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.70/getting-started">入门基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.70/environment-setup">环境搭建</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.70/running-on-device">开发流程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.70/style">设计</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.70/performance">性能调优</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.70/javascript-environment">JavaScript 运行环境</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.70/native-modules-intro">原生模块</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.70/native-components-android">原生 UI 组件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.70/the-new-architecture/landing-page">新架构介绍</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/0.70/new-architecture-intro">新架构迁移指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/new-architecture-intro">迁移到新架构</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0">在第三方库中启用</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/new-architecture-library-intro">在库中启用的预备工作</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/new-architecture-library-android">在 Android 库中启用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/new-architecture-library-ios">在 iOS 库中启用</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" tabindex="0">在应用中启用</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/new-architecture-app-intro">在应用中启用的预备工作</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0.70/new-architecture-app-modules-android">在 Android 上启用 TurboModule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/new-architecture-app-modules-ios">在 iOS 上启用 TurboModule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/new-architecture-app-renderer-android">在 Android 上启用 Fabric</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/new-architecture-app-renderer-ios">在 iOS 上启用 Fabric</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/react-18-and-react-native">React 18 与 React Native</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/new-architecture-troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/new-architecture-appendix">Appendix</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.70/headless-js-android">Android 与 iOS 指南</a></div></li></ul></nav></div></aside><main class="docMainContainer_sTIZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->React Native 中文网<!-- --> <b>0.70</b> 版的文档，现已不再积极维护。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/docs/new-architecture-app-modules-android">最新版本</a></b> (<!-- -->0.71<!-- -->)。</div></div><div class="docItemContainer_tjFy"><article><a href="https://time.geekbang.org/column/intro/100110101?code=FAqHFVRUur%2FgAP-yJQWitk9ieF80imRky3PVsIs%2FX6A%3D" target="_blank" style="display:block;padding:12px;background-color:#eee;color:#666;margin-bottom:15px"><span style="font-weight:bold;color:#05a5d1">新架构实战课</span> <!-- -->实操 + 基建 + 原理全维度包揽，抢先掌握 React Native 新架构精髓<!-- --> <span style="border:solid 1px #666;padding:4px 6px;margin-left:8px;vertical-align:middle">立即查看 &gt;</span></a><span class="theme-doc-version-badge badge badge--secondary">Version: 0.70</span><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>在 Android 上启用 TurboModule</h1></header><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_uH4V"><div class="admonitionHeading_P5_N"><span class="admonitionIcon_MF44"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_yySL"><p>本文档内容仍处于实验阶段，内容会随着版本的迭代进行修改。您可随时在我们的<a href="https://github.com/reactwg/react-native-new-architecture/discussions/8" target="_blank" rel="noopener noreferrer">工作组的讨论区</a>发送反馈。
此外，本文档还包含了若干需手动配置的步骤，但这不代表新架构稳定版的最终开发体验。我们仍在开发相关的工具、模板和第三方库，帮助你更快地迁移到新架构上，而非从头开始配置环境。</p></div></div><p>Make sure your application meets all the <a href="/docs/0.70/new-architecture-app-intro">prerequisites</a>.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="1-enable-ndk-and-the-native-build">1. Enable NDK and the native build<a class="hash-link" href="#1-enable-ndk-and-the-native-build" title="标题的直接链接">​</a></h2><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_uH4V"><div class="admonitionHeading_P5_N"><span class="admonitionIcon_MF44"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_yySL"><p>In this iteration of the guide we’re setting up the project to let you build from source. You might notice an increase in your build time because of this.
You can mitigate this by following the approach described in <a href="/docs/next/build-speed">Speeding up your Build phase</a> guide.</p></div></div><p>The Codegen will output some Java and some C++ code that now we need to build.</p><p>Let’s edit your <strong>module-level</strong> <code>build.gradle</code> to include the <strong>two</strong> <code>externalNativeBuild</code> blocks detailed below inside the <code>android{}</code> block:</p><div class="language-groovy codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-groovy codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">android </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    defaultConfig </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        applicationId </span><span class="token interpolation-string string" style="color:#8dc891">&quot;com.awesomeproject&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token comment" style="color:#93a1a1">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token comment" style="color:#93a1a1">// Add this block</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        externalNativeBuild </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            ndkBuild </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                arguments </span><span class="token interpolation-string string" style="color:#8dc891">&quot;APP_PLATFORM=android-21&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token interpolation-string string" style="color:#8dc891">&quot;APP_STL=c++_shared&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token interpolation-string string" style="color:#8dc891">&quot;NDK_TOOLCHAIN_VERSION=clang&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token interpolation-string string" style="color:#8dc891">&quot;GENERATED_SRC_DIR=</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#657b83">$</span><span class="token interpolation-string interpolation expression">buildDir</span><span class="token interpolation-string string" style="color:#8dc891">/generated/source&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token interpolation-string string" style="color:#8dc891">&quot;PROJECT_BUILD_DIR=</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#657b83">$</span><span class="token interpolation-string interpolation expression">buildDir</span><span class="token interpolation-string string" style="color:#8dc891">&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token interpolation-string string" style="color:#8dc891">&quot;REACT_ANDROID_DIR=</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#657b83">$</span><span class="token interpolation-string interpolation expression">rootDir</span><span class="token interpolation-string string" style="color:#8dc891">/../node_modules/react-native/ReactAndroid&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token interpolation-string string" style="color:#8dc891">&quot;REACT_ANDROID_BUILD_DIR=</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#657b83">$</span><span class="token interpolation-string interpolation expression">rootDir</span><span class="token interpolation-string string" style="color:#8dc891">/../node_modules/react-native/ReactAndroid/build&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token interpolation-string string" style="color:#8dc891">&quot;NODE_MODULES_DIR=</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#657b83">$</span><span class="token interpolation-string interpolation expression">rootDir</span><span class="token interpolation-string string" style="color:#8dc891">/../node_modules&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                cFlags </span><span class="token interpolation-string string" style="color:#8dc891">&quot;-Wall&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#8dc891">&quot;-Werror&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#8dc891">&quot;-fexceptions&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#8dc891">&quot;-frtti&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#8dc891">&quot;-DWITH_INSPECTOR=1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                cppFlags </span><span class="token interpolation-string string" style="color:#8dc891">&quot;-std=c++17&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                targets </span><span class="token interpolation-string string" style="color:#8dc891">&quot;myapplication_appmodules&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token comment" style="color:#93a1a1">// Fix for windows limit on number of character in file paths and in command lines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">Os</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">isFamily</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">Os</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">FAMILY_WINDOWS</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                    arguments </span><span class="token interpolation-string string" style="color:#8dc891">&quot;NDK_APP_SHORT_COMMANDS=true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token comment" style="color:#93a1a1">// Add this block</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    externalNativeBuild </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        ndkBuild </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            path </span><span class="token interpolation-string string" style="color:#8dc891">&quot;</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#657b83">$</span><span class="token interpolation-string interpolation expression">projectDir</span><span class="token interpolation-string string" style="color:#8dc891">/src/main/jni/Android.mk&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the same <code>build.gradle</code> file, inside the same <code>android{}</code> let’s add also the following section:</p><div class="language-groovy codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-groovy codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">android </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token comment" style="color:#93a1a1">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> reactAndroidProjectDir </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">project</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&#x27;:ReactAndroid&#x27;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">projectDir</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> packageReactNdkLibs </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> tasks</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">register</span><span class="token punctuation" style="color:#657b83">(</span><span class="token interpolation-string string" style="color:#8dc891">&quot;packageReactNdkLibs&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> Copy</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token function" style="color:#79b6f2">dependsOn</span><span class="token punctuation" style="color:#657b83">(</span><span class="token interpolation-string string" style="color:#8dc891">&quot;:ReactAndroid:packageReactNdkLibsForBuck&quot;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token function" style="color:#79b6f2">dependsOn</span><span class="token punctuation" style="color:#657b83">(</span><span class="token interpolation-string string" style="color:#8dc891">&quot;generateCodegenArtifactsFromSchema&quot;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token function" style="color:#79b6f2">from</span><span class="token punctuation" style="color:#657b83">(</span><span class="token interpolation-string string" style="color:#8dc891">&quot;</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#657b83">$</span><span class="token interpolation-string interpolation expression">reactAndroidProjectDir</span><span class="token interpolation-string string" style="color:#8dc891">/src/main/jni/prebuilt/lib&quot;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token function" style="color:#79b6f2">into</span><span class="token punctuation" style="color:#657b83">(</span><span class="token interpolation-string string" style="color:#8dc891">&quot;</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#657b83">$</span><span class="token interpolation-string interpolation expression">buildDir</span><span class="token interpolation-string string" style="color:#8dc891">/react-ndk/exported&quot;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    afterEvaluate </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        preBuild</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">dependsOn</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">packageReactNdkLibs</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        configureNdkBuildDebug</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">dependsOn</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">preBuild</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        configureNdkBuildRelease</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">dependsOn</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">preBuild</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    packagingOptions </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        pickFirst </span><span class="token string" style="color:#8dc891">&#x27;**/libhermes.so&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        pickFirst </span><span class="token string" style="color:#8dc891">&#x27;**/libjsc.so&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, we need to create a Makefile inside the <code>src/main/jni</code> folder called <code>Android.mk</code> with the following content:</p><div class="language-makefile codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-makefile codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">THIS_DIR </span><span class="token operator" style="color:#fc929e">:=</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token function" style="color:#79b6f2">call</span><span class="token plain"> my-dir</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">include</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">REACT_ANDROID_DIR</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain">/Android-prebuilt.mk</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># If you wish to add a custom TurboModule or Fabric component in your app you</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># will have to include the following autogenerated makefile.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># include $(GENERATED_SRC_DIR)/codegen/jni/Android.mk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Includes the MK file for autolinked libraries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">include</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">PROJECT_BUILD_DIR</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain">/generated/rncli/src/main/jni/Android-rncli.mk</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">include</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">CLEAR_VARS</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">LOCAL_PATH </span><span class="token operator" style="color:#fc929e">:=</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">THIS_DIR</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># You can customize the name of your application .so file here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">LOCAL_MODULE </span><span class="token operator" style="color:#fc929e">:=</span><span class="token plain"> awesomeapp_appmodules</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">LOCAL_C_INCLUDES </span><span class="token operator" style="color:#fc929e">:=</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">LOCAL_PATH</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">PROJECT_BUILD_DIR</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain">/generated/rncli/src/main/jni</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">LOCAL_SRC_FILES </span><span class="token operator" style="color:#fc929e">:=</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token function" style="color:#79b6f2">wildcard</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">LOCAL_PATH</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain">/*.cpp</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token function" style="color:#79b6f2">wildcard</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">PROJECT_BUILD_DIR</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain">/generated/rncli/src/main/jni/*.cpp</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">LOCAL_EXPORT_C_INCLUDES </span><span class="token operator" style="color:#fc929e">:=</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">LOCAL_PATH</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">PROJECT_BUILD_DIR</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain">/generated/rncli/src/main/jni</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># If you wish to add a custom TurboModule or Fabric component in your app you</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># will have to uncomment those lines to include the generated source</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># files from the codegen (placed in $(GENERATED_SRC_DIR)/codegen/jni)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># LOCAL_C_INCLUDES += $(GENERATED_SRC_DIR)/codegen/jni</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># LOCAL_SRC_FILES += $(wildcard $(GENERATED_SRC_DIR)/codegen/jni/*.cpp)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># LOCAL_EXPORT_C_INCLUDES += $(GENERATED_SRC_DIR)/codegen/jni</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Here you should add any native library you wish to depend on.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">LOCAL_SHARED_LIBRARIES </span><span class="token operator" style="color:#fc929e">:=</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libfabricjni \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libfbjni \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libfolly_runtime \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libglog \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libjsi \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libreact_codegen_rncore \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libreact_debug \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libreact_nativemodule_core \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libreact_render_componentregistry \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libreact_render_core \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libreact_render_debug \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libreact_render_graphics \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">librrc_view \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libruntimeexecutor \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libturbomodulejsijni \</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">libyoga</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Autolinked libraries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">LOCAL_SHARED_LIBRARIES </span><span class="token operator" style="color:#fc929e">+=</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token function" style="color:#79b6f2">call</span><span class="token plain"> import-codegen-modules</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">LOCAL_CFLAGS </span><span class="token operator" style="color:#fc929e">:=</span><span class="token plain"> -DLOG_TAG</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">\&quot;ReactNative\&quot; -fexceptions -frtti -std</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">c++17</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">include</span><span class="token plain"> </span><span class="token variable" style="color:#cb4b16">$</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">BUILD_SHARED_LIBRARY</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This setup will run a native build on your project and will compile the C++ files that have been generated by the codegen. You will see the native build running with the Gradle task <code>:app:externalNativeBuildDebug</code></p><p>You can now verify that everything works correctly by running your android app:</p><div class="language-bash codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-bash codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token function" style="color:#79b6f2">yarn</span><span class="token plain"> react-native run-android</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="2-javakotlin---provide-a-reactpackageturbomodulemanagerdelegate">2. Java/Kotlin - Provide a <code>ReactPackageTurboModuleManagerDelegate</code><a class="hash-link" href="#2-javakotlin---provide-a-reactpackageturbomodulemanagerdelegate" title="标题的直接链接">​</a></h2><p>Now is time to actually use the TurboModule.
First, we will need to create a <code>ReactPackageTurboModuleManagerDelegate</code> subclass, like the following:</p><div class="tabs-container tabList_J5MA"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_l0OV tabs__item--active">java</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">kotlin</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_wHwb"><div class="language-java codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-java codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">com</span><span class="token namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token namespace" style="opacity:0.7">awesomeproject</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">facebook</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">jni</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import class-name" style="color:#fac863">HybridData</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">facebook</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">react</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import class-name" style="color:#fac863">ReactPackage</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">facebook</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">react</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import class-name" style="color:#fac863">ReactPackageTurboModuleManagerDelegate</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">facebook</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">react</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">bridge</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import class-name" style="color:#fac863">ReactApplicationContext</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">facebook</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">soloader</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import class-name" style="color:#fac863">SoLoader</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#657b83">.</span><span class="token import class-name" style="color:#fac863">List</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactPackageTurboModuleManagerDelegate</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">static</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">boolean</span><span class="token plain"> sIsSoLibraryLoaded</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token class-name" style="color:#fac863">ReactApplicationContext</span><span class="token plain"> reactApplicationContext</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">List</span><span class="token generics punctuation" style="color:#657b83">&lt;</span><span class="token generics class-name" style="color:#fac863">ReactPackage</span><span class="token generics punctuation" style="color:#657b83">&gt;</span><span class="token plain"> packages</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">super</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">reactApplicationContext</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> packages</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">native</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">HybridData</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">initHybrid</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">static</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">Builder</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactPackageTurboModuleManagerDelegate</span><span class="token class-name punctuation" style="color:#657b83">.</span><span class="token class-name" style="color:#fac863">Builder</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token class-name" style="color:#fac863">ReactApplicationContext</span><span class="token plain"> context</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">List</span><span class="token generics punctuation" style="color:#657b83">&lt;</span><span class="token generics class-name" style="color:#fac863">ReactPackage</span><span class="token generics punctuation" style="color:#657b83">&gt;</span><span class="token plain"> packages</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> packages</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">synchronized</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">maybeLoadOtherSoLibraries</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token comment" style="color:#93a1a1">// Prevents issues with initializer interruptions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token operator" style="color:#fc929e">!</span><span class="token plain">sIsSoLibraryLoaded</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token class-name" style="color:#fac863">SoLoader</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">loadLibrary</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&quot;myapplication_appmodules&quot;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            sIsSoLibraryLoaded </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-kotlin codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-kotlin codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">package</span><span class="token plain"> com</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">awesomeproject</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">facebook</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">jni</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">HybridData</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">facebook</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">react</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">ReactPackage</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">facebook</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">react</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">ReactPackageTurboModuleManagerDelegate</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">facebook</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">react</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">bridge</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">ReactApplicationContext</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> com</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">facebook</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">soloader</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">SoLoader</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> MyApplicationTurboModuleManagerDelegate</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">constructor</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    reactApplicationContext</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> ReactApplicationContext</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    packages</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> List</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">ReactPackage</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">ReactPackageTurboModuleManagerDelegate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">reactApplicationContext</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> packages</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">external</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">initHybrid</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> HybridData</span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> Builder </span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> ReactPackageTurboModuleManagerDelegate</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">Builder</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            context</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> ReactApplicationContext</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            packages</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> List</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">ReactPackage</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> MyApplicationTurboModuleManagerDelegate </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token function" style="color:#79b6f2">MyApplicationTurboModuleManagerDelegate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> packages</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token annotation builtin" style="color:#2aa198">@Synchronized</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">maybeLoadOtherSoLibraries</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token comment" style="color:#93a1a1">// Prevents issues with initializer interruptions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token operator" style="color:#fc929e">!</span><span class="token plain">isSoLibraryLoaded</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            SoLoader</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">loadLibrary</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string-literal singleline string" style="color:#8dc891">&quot;myapplication_appmodules&quot;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            isSoLibraryLoaded </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">companion</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">object</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token annotation builtin" style="color:#2aa198">@Volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> isSoLibraryLoaded </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>Please note that the <code>SoLoader.loadLibrary</code> parameter (in this case <code>&quot;myapplication_appmodules&quot;)</code> should be the same as the one specified for <code>LOCAL_MODULE :=</code> inside the <code>Android.mk</code> file you created before.</p><p>This class will then be responsible of loading the TurboModules and will take care of loading the native library build with the NDK at runtime.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="3-adapt-your-reactnativehost-to-use-the-reactpackageturbomodulemanagerdelegate">3. Adapt your <code>ReactNativeHost</code> to use the <code>ReactPackageTurboModuleManagerDelegate</code><a class="hash-link" href="#3-adapt-your-reactnativehost-to-use-the-reactpackageturbomodulemanagerdelegate" title="标题的直接链接">​</a></h2><p>Then, you can provide the class you created to your <code>ReactNativeHost</code>. You can locate your <code>ReactNativeHost</code> by searching for the <code>getReactNativeHost()</code>. The <code>ReactNativeHost</code> is usually located inside your <code>Application</code> class.</p><p>Once you located it, you need to add the <code>getReactPackageTurboModuleManagerDelegateBuilder</code> method as from the snippet below:</p><div class="tabs-container tabList_J5MA"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_l0OV tabs__item--active">java</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">kotlin</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_wHwb"><div class="language-java codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-java codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplication</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">Application</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">implements</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactNativeHost</span><span class="token plain"> mReactNativeHost </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactNativeHost</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">boolean</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getUseDeveloperSupport</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">/* ... */</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">List</span><span class="token generics punctuation" style="color:#657b83">&lt;</span><span class="token generics class-name" style="color:#fac863">ReactPackage</span><span class="token generics punctuation" style="color:#657b83">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getPackages</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">/* ... */</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">String</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getJSMainModuleName</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token comment" style="color:#93a1a1">/* ... */</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#657b83">@NonNull</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactPackageTurboModuleManagerDelegate</span><span class="token class-name punctuation" style="color:#657b83">.</span><span class="token class-name" style="color:#fac863">Builder</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getReactPackageTurboModuleManagerDelegateBuilder</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token class-name punctuation" style="color:#657b83">.</span><span class="token class-name" style="color:#fac863">Builder</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-kotlin codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-kotlin codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> MyApplication </span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">Application</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> ReactApplication </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">val</span><span class="token plain"> reactNativeHost</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> ReactNativeHost </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">object</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">ReactNativeHost</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getUseDeveloperSupport</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> Boolean </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token comment" style="color:#93a1a1">/* ... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getPackages</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> List</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">ReactPackage</span><span class="token operator" style="color:#fc929e">?</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token comment" style="color:#93a1a1">/* ... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getJSMainModuleName</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> String</span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token comment" style="color:#93a1a1">/* ... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation builtin" style="color:#2aa198">@NonNull</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getReactPackageTurboModuleManagerDelegateBuilder</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                ReactPackageTurboModuleManagerDelegate</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">Builder</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="4-extend-the-getpackages-from-your-reactnativehost-to-use-the-turbomodule">4. Extend the <code>getPackages()</code> from your <code>ReactNativeHost</code> to use the TurboModule<a class="hash-link" href="#4-extend-the-getpackages-from-your-reactnativehost-to-use-the-turbomodule" title="标题的直接链接">​</a></h2><p>Still on the <code>ReactNativeHost</code> , we need to extend the the <code>getPackages()</code> method to include the newly created TurboModule. Update the method to include the following:</p><div class="tabs-container tabList_J5MA"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_l0OV tabs__item--active">java</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">kotlin</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_wHwb"><div class="language-java codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-java codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplication</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">Application</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">implements</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactNativeHost</span><span class="token plain"> mReactNativeHost </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactNativeHost</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">boolean</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getUseDeveloperSupport</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">/* ... */</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">List</span><span class="token generics punctuation" style="color:#657b83">&lt;</span><span class="token generics class-name" style="color:#fac863">ReactPackage</span><span class="token generics punctuation" style="color:#657b83">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getPackages</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token class-name" style="color:#fac863">List</span><span class="token generics punctuation" style="color:#657b83">&lt;</span><span class="token generics class-name" style="color:#fac863">ReactPackage</span><span class="token generics punctuation" style="color:#657b83">&gt;</span><span class="token plain"> packages </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">PackageList</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">getPackages</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token comment" style="color:#93a1a1">// Add those lines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                packages</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">add</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">TurboReactPackage</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                    </span><span class="token annotation punctuation" style="color:#657b83">@Nullable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                    </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">NativeModule</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#657b83">(</span><span class="token class-name" style="color:#fac863">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactApplicationContext</span><span class="token plain"> reactContext</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">equals</span><span class="token punctuation" style="color:#657b83">(</span><span class="token class-name" style="color:#fac863">NativeAwesomeManager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">NAME</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">NativeAwesomeManager</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">reactContext</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                    </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactModuleInfoProvider</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getReactModuleInfoProvider</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            </span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">Map</span><span class="token generics punctuation" style="color:#657b83">&lt;</span><span class="token generics class-name" style="color:#fac863">String</span><span class="token generics punctuation" style="color:#657b83">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#fac863">ReactModuleInfo</span><span class="token generics punctuation" style="color:#657b83">&gt;</span><span class="token plain"> moduleInfos </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">HashMap</span><span class="token generics punctuation" style="color:#657b83">&lt;</span><span class="token generics punctuation" style="color:#657b83">&gt;</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            moduleInfos</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">put</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                    </span><span class="token class-name" style="color:#fac863">NativeAwesomeManager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">NAME</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                    </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactModuleInfo</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                            </span><span class="token class-name" style="color:#fac863">NativeAwesomeManager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">NAME</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                            </span><span class="token string" style="color:#8dc891">&quot;NativeAwesomeManager&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                            </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// canOverrideExistingModule</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                            </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// needsEagerInit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                            </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// hasConstants</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                            </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// isCxxModule</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                            </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// isTurboModule</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                    </span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            </span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> moduleInfos</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> packages</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">String</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getJSMainModuleName</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token comment" style="color:#93a1a1">/* ... */</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#657b83">@NonNull</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactPackageTurboModuleManagerDelegate</span><span class="token class-name punctuation" style="color:#657b83">.</span><span class="token class-name" style="color:#fac863">Builder</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getReactPackageTurboModuleManagerDelegateBuilder</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token class-name punctuation" style="color:#657b83">.</span><span class="token class-name" style="color:#fac863">Builder</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-kotlin codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-kotlin codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">MyApplication</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">Application</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> ReactApplication </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">val</span><span class="token plain"> reactNativeHost</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> ReactNativeHost </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">object</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">ReactNativeHost</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getUseDeveloperSupport</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> Boolean </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token comment" style="color:#93a1a1">/* ... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getPackages</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> List</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">ReactPackage</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">val</span><span class="token plain"> packages</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> MutableList</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">ReactPackage</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">PackageList</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">getPackages</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token comment" style="color:#93a1a1">// Add those lines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                packages</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">add</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                    </span><span class="token keyword" style="color:#c5a5c5">object</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">TurboReactPackage</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token annotation builtin" style="color:#2aa198">@Nullable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            name</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> String</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            reactContext</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> ReactApplicationContext</span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> NativeModule</span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">name </span><span class="token operator" style="color:#fc929e">==</span><span class="token plain"> NativeAwesomeManager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">NAME</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                </span><span class="token function" style="color:#79b6f2">NativeAwesomeManager</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">reactContext</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                </span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                        </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getReactModuleInfoProvider</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            mutableMapOf</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">String</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> ReactModuleInfo</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                NativeAwesomeManager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">NAME</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                </span><span class="token function" style="color:#79b6f2">ReactModuleInfo</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                    NativeAwesomeManager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">NAME</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                    </span><span class="token string-literal singleline string" style="color:#8dc891">&quot;NativeAwesomeManager&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                    </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// canOverrideExistingModule</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                    </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// needsEagerInit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                    </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// hasConstants</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                    </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// isCxxModule</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                    </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// isTurboModule</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                                </span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                            </span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> packages</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getJSMainModuleName</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> String</span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token comment" style="color:#93a1a1">/* ... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token annotation builtin" style="color:#2aa198">@NonNull</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getReactPackageTurboModuleManagerDelegateBuilder</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                ReactPackageTurboModuleManagerDelegate</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">Builder</span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">Builder</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="5-c-provide-a-native-implementation-for-the-methods-in-your-turbomoduledelegate-class">5. C++ Provide a native implementation for the methods in your <code>*TurboModuleDelegate</code> class<a class="hash-link" href="#5-c-provide-a-native-implementation-for-the-methods-in-your-turbomoduledelegate-class" title="标题的直接链接">​</a></h2><p>If you take a closer look at the class <code>MyApplicationTurboModuleManagerDelegate</code> that you created before, you will notice how some of the methods are <code>native</code>.</p><p>Therefore, you need to provide some C++ classes to implement those methods. Specifically you will need those files, to be added inside the <code>src/main/jni</code> folder:</p><ul><li><code>MyApplicationTurboModuleManagerDelegate.h</code> An header file for the TurboModule Delegate.</li><li><code>MyApplicationTurboModuleManagerDelegate.cpp</code> The implementation of the aforementioned header file.</li><li><code>MyApplicationModuleProvider.h</code> A header file for the TurboModule provider, where you can specify which TurboModules you want to load.</li><li><code>MyApplicationModuleProvider.cpp</code> The implementation for the aforementioned header file.</li><li><code>OnLoad.cpp</code> Where the initialisation code will be placed. Specifically TurboModule uses FBJNI so the initialisation for such library lives there.</li></ul><p>The content of those files should be the following:</p><h4 class="anchor anchorWithStickyNavbar_JmGV" id="myapplicationturbomodulemanagerdelegateh">MyApplicationTurboModuleManagerDelegate.h<a class="hash-link" href="#myapplicationturbomodulemanagerdelegateh" title="标题的直接链接">​</a></h4><p>Please note that the <code>kJavaDescriptor</code> should be adapted to follow the package name you picked for your project.</p><div class="language-cpp codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-cpp codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&lt;memory&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&lt;string&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&lt;ReactCommon/TurboModuleManagerDelegate.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&lt;fbjni/fbjni.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> facebook </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> react </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token base-clause keyword" style="color:#c5a5c5">public</span><span class="token base-clause"> jni</span><span class="token base-clause double-colon punctuation" style="color:#657b83">::</span><span class="token base-clause class-name" style="color:#fac863">HybridClass</span><span class="token base-clause operator" style="color:#fc929e">&lt;</span><span class="token base-clause class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token base-clause punctuation" style="color:#657b83">,</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:#fac863">TurboModuleManagerDelegate</span><span class="token base-clause operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1">// Adapt it to the package you used for your Java class.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">static</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">constexpr</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">auto</span><span class="token plain"> kJavaDescriptor </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      </span><span class="token string" style="color:#8dc891">&quot;Lcom/awesomeproject/MyApplicationTurboModuleManagerDelegate;&quot;</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">static</span><span class="token plain"> jni</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">local_ref</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">jhybriddata</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">initHybrid</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">jni</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">alias_ref</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">jhybridobject</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">static</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">registerNatives</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">TurboModule</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getTurboModule</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">string name</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">CallInvoker</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> jsInvoker</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">TurboModule</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getTurboModule</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">string name</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> JavaTurboModule</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">InitParams </span><span class="token operator" style="color:#fc929e">&amp;</span><span class="token plain">params</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">friend</span><span class="token plain"> HybridBase</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">using</span><span class="token plain"> HybridBase</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">HybridBase</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// namespace react</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// namespace facebook</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_JmGV" id="myapplicationturbomodulemanagerdelegatecpp">MyApplicationTurboModuleManagerDelegate.cpp<a class="hash-link" href="#myapplicationturbomodulemanagerdelegatecpp" title="标题的直接链接">​</a></h4><div class="language-cpp codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-cpp codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&quot;MyApplicationTurboModuleManagerDelegate.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&quot;MyApplicationModuleProvider.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> facebook </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> react </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">jni</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">local_ref</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">MyApplicationTurboModuleManagerDelegate</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">jhybriddata</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token function" style="color:#79b6f2">initHybrid</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">jni</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">alias_ref</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">jhybridobject</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">makeCxxInstance</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token function" style="color:#79b6f2">registerNatives</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token function" style="color:#79b6f2">registerHybrid</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token function" style="color:#79b6f2">makeNativeMethod</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&quot;initHybrid&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> MyApplicationTurboModuleManagerDelegate</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">initHybrid</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">TurboModule</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token function" style="color:#79b6f2">getTurboModule</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">string name</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">CallInvoker</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> jsInvoker</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1">// Not implemented yet: provide pure-C++ NativeModules here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">nullptr</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">TurboModule</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token function" style="color:#79b6f2">getTurboModule</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">string name</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> JavaTurboModule</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">InitParams </span><span class="token operator" style="color:#fc929e">&amp;</span><span class="token plain">params</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">MyApplicationModuleProvider</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> params</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// namespace react</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// namespace facebook</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_JmGV" id="myapplicationmoduleproviderh">MyApplicationModuleProvider.h<a class="hash-link" href="#myapplicationmoduleproviderh" title="标题的直接链接">​</a></h4><div class="language-cpp codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-cpp codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">pragma</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property expression" style="color:#2aa198">once</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&lt;memory&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&lt;string&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&lt;ReactCommon/JavaTurboModule.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> facebook </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> react </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">TurboModule</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">MyApplicationModuleProvider</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">string moduleName</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> JavaTurboModule</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">InitParams </span><span class="token operator" style="color:#fc929e">&amp;</span><span class="token plain">params</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// namespace react</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// namespace facebook</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_JmGV" id="myapplicationmoduleprovidercpp">MyApplicationModuleProvider.cpp<a class="hash-link" href="#myapplicationmoduleprovidercpp" title="标题的直接链接">​</a></h4><p>Please adapt the <code>samplelibrary.h</code> import to match the same library name you provided when building the apps.
This is the C++ generated file that is created by the codegen.</p><p>Here you can also specify more than one provider, should you have more than one TurboModule. Specifically in this example we look for a TurboModule from <code>samplelibrary</code> (the one we specified) and we fallback to the <code>rncore</code> Module Provider (containing all the Core modules).</p><div class="language-cpp codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-cpp codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&quot;MyApplicationModuleProvider.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&lt;rncore.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&lt;samplelibrary.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> facebook </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> react </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">TurboModule</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">MyApplicationModuleProvider</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">string moduleName</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> JavaTurboModule</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">InitParams </span><span class="token operator" style="color:#fc929e">&amp;</span><span class="token plain">params</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">auto</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">module</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">samplelibrary_ModuleProvider</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">moduleName</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> params</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">module</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">nullptr</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">module</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">rncore_ModuleProvider</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">moduleName</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> params</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// namespace react</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// namespace facebook</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_JmGV" id="onloadcpp">OnLoad.cpp<a class="hash-link" href="#onloadcpp" title="标题的直接链接">​</a></h4><div class="language-cpp codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-cpp codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&lt;fbjni/fbjni.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">include</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property string" style="color:#8dc891">&quot;MyApplicationTurboModuleManagerDelegate.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">JNIEXPORT jint JNICALL </span><span class="token function" style="color:#79b6f2">JNI_OnLoad</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">JavaVM </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain">vm</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">*</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> facebook</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">jni</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token function" style="color:#79b6f2">initialize</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">vm</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    facebook</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token plain">react</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token class-name" style="color:#fac863">MyApplicationTurboModuleManagerDelegate</span><span class="token double-colon punctuation" style="color:#657b83">::</span><span class="token function" style="color:#79b6f2">registerNatives</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="6-enable-the-useturbomodules-flag-in-your-application-oncreate">6. Enable the <code>useTurboModules</code> flag in your Application <code>onCreate</code><a class="hash-link" href="#6-enable-the-useturbomodules-flag-in-your-application-oncreate" title="标题的直接链接">​</a></h2><p>Now you can finally enable the <code>TurboModule </code>support in your Application. To do so, you need to turn on the <code>useTurboModule</code> flag inside your Application <code>onCreate</code> method.</p><div class="tabs-container tabList_J5MA"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_l0OV tabs__item--active">java</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">kotlin</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_wHwb"><div class="language-java codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-java codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyApplication</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">Application</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">implements</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">ReactApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#657b83">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">onCreate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token class-name" style="color:#fac863">ReactFeatureFlags</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">useTurboModules </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token comment" style="color:#93a1a1">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-kotlin codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-kotlin codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> MyApplication </span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">Application</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> ReactApplication </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">override</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">fun</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">onCreate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        ReactFeatureFlags</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">useTurboModules </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token comment" style="color:#93a1a1">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>It’s now time to run again your Android app to verify that everything works correctly:</p><div class="language-bash codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-bash codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token function" style="color:#79b6f2">yarn</span><span class="token plain"> react-native run-android</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/reactnativecn/react-native-website/blob/production/cnwebsite/../cndocs/new-architecture-app-modules-android.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>改进此文档</a></div><div class="col lastUpdated_pbO5"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0.70/new-architecture-app-intro"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">在应用中启用的预备工作</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0.70/new-architecture-app-modules-ios"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">在 iOS 上启用 TurboModule</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-enable-ndk-and-the-native-build" class="table-of-contents__link toc-highlight">1. Enable NDK and the native build</a></li><li><a href="#2-javakotlin---provide-a-reactpackageturbomodulemanagerdelegate" class="table-of-contents__link toc-highlight">2. Java/Kotlin - Provide a <code>ReactPackageTurboModuleManagerDelegate</code></a></li><li><a href="#3-adapt-your-reactnativehost-to-use-the-reactpackageturbomodulemanagerdelegate" class="table-of-contents__link toc-highlight">3. Adapt your <code>ReactNativeHost</code> to use the <code>ReactPackageTurboModuleManagerDelegate</code></a></li><li><a href="#4-extend-the-getpackages-from-your-reactnativehost-to-use-the-turbomodule" class="table-of-contents__link toc-highlight">4. Extend the <code>getPackages()</code> from your <code>ReactNativeHost</code> to use the TurboModule</a></li><li><a href="#5-c-provide-a-native-implementation-for-the-methods-in-your-turbomoduledelegate-class" class="table-of-contents__link toc-highlight">5. C++ Provide a native implementation for the methods in your <code>*TurboModuleDelegate</code> class</a></li><li><a href="#6-enable-the-useturbomodules-flag-in-your-application-oncreate" class="table-of-contents__link toc-highlight">6. Enable the <code>useTurboModules</code> flag in your Application <code>onCreate</code></a></li></ul><div class="wwads-cn wwads-vertical" data-id="58" style="max-width:200px;margin-top:20px"></div> </div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">React Native 中文网 © 2023 武汉青罗网络科技有限公司
      <a style="margin-left:10px" href="http://beian.miit.gov.cn/">鄂ICP备20002031号-3</a>
      <img style="width:25px" src="//img.alicdn.com/tfs/TB1..50QpXXXXX7XpXXXXXXXXXX-40-40.png" alt="鄂公网安备 42011202001821号">
      <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42011202001821">鄂公网安备 42011202001821号</a>
      </div></div></div></footer></div>
<script src="/assets/js/runtime~main.70a32198.js"></script>
<script src="/assets/js/main.b1314b11.js"></script>
</body>
</html>
<!doctype html>
<html class="docs-version-0.67" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="search" type="application/opensearchdescription+xml" title="React Native ä¸­æ–‡ç½‘" href="/opensearch.xml">
<script src="//snack.expo.dev/embed.js" defer="defer"></script>
<script src="//cdn.wwads.cn/js/makemoney.js" defer="defer"></script><title data-react-helmet="true">Prerequisites for Applications Â· React Native ä¸­æ–‡ç½‘</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="twitter:image" content="https://reactnative.cn/img/logo-og.png"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="0.67"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-0.67"><meta data-react-helmet="true" property="og:url" content="https://reactnative.cn"><meta data-react-helmet="true" property="og:image" content="img/logo-og.png"><meta data-react-helmet="true" property="og:title" content="Prerequisites for Applications Â· React Native ä¸­æ–‡ç½‘"><meta data-react-helmet="true" name="description" content="Thereâ€™s a few prerequisites that should be addressed before the new architecture is enabled in your application."><meta data-react-helmet="true" property="og:description" content="Thereâ€™s a few prerequisites that should be addressed before the new architecture is enabled in your application."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://reactnative.cn/docs/new-architecture-app-intro"><link data-react-helmet="true" rel="alternate" href="https://reactnative.cn/docs/new-architecture-app-intro" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://reactnative.cn/docs/new-architecture-app-intro" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a48218da.css">
<link rel="preload" href="/assets/js/runtime~main.a146ad94.js" as="script">
<link rel="preload" href="/assets/js/main.873c95ea.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_3wvD">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/header_logo.svg" alt="React Native ä¸­æ–‡ç½‘" class="themedImage_Ir0T themedImage--light_2_E0"><img src="/img/header_logo.svg" alt="React Native ä¸­æ–‡ç½‘" class="themedImage_Ir0T themedImage--dark_2JiM"></div><b class="navbar__title">React Native ä¸­æ–‡ç½‘</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/docs/getting-started">0.67</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/new-architecture-app-intro">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/new-architecture-app-intro">0.67</a></li><li><a class="dropdown__link" href="/docs/0.66/getting-started">0.66</a></li><li><a class="dropdown__link" href="/docs/0.65/getting-started">0.65</a></li><li><a class="dropdown__link" href="/docs/0.64/getting-started">0.64</a></li><li><a class="dropdown__link" href="/docs/0.63/getting-started">0.63</a></li><li><a class="dropdown__link" href="/versions">æ‰€æœ‰ç‰ˆæœ¬</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/docs/components-and-apis">ç»„ä»¶</a><a class="navbar__item navbar__link" href="/docs/accessibilityinfo">API</a><a class="navbar__item navbar__link" href="/docs/architecture-overview">æ¶æ„</a><a href="//github.com/reactnativecn/react-native-website/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>è®¨è®º<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_pqex"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="//pushy.reactnative.cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link pushy"><span>çƒ­æ›´æ–°<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_pqex"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link" href="/about">å…³äº</a><a href="//github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="toggle_2wFP toggle_2vag toggleDisabled_1jUP"><div class="toggleTrack_OYnE" role="button" tabindex="-1"><div class="toggleTrackCheck_3aVv"><span class="toggleIcon_1mQT">ğŸŒœ</span></div><div class="toggleTrackX_oB48"><span class="toggleIcon_1mQT">ğŸŒ</span></div><div class="toggleTrackThumb_3qal"></div></div><input type="checkbox" class="toggleScreenReader_bg_d" aria-label="Switch between dark and light mode"></div><div class="searchBox_WYtD"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_3jyA"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_2PbN" type="button"></button><main class="docMainContainer_28SP docMainContainerEnhanced_YA74"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2rXS"><div class="docItemContainer_1EXp"><article><a href="https://time.geekbang.org/column/intro/100110101?code=FAqHFVRUur%2FgAP-yJQWitk9ieF80imRky3PVsIs%2FX6A%3D" target="_blank" style="display:block;padding:12px;background-color:#eee;color:#666;margin-bottom:15px"><span style="font-weight:bold;color:#05a5d1">æ–°æ¶æ„å®æˆ˜è¯¾</span> <!-- -->å®æ“/åŸºå»º/åŸç†å…¨ç»´åº¦åŒ…æ½ï¼ŒæŠ¢å…ˆæŒæ¡æ–°æ¶æ„ç²¾é«“<!-- --> <span style="border:solid 1px #666;padding:4px 6px;margin-left:8px;vertical-align:middle">ç«‹å³æŸ¥çœ‹ &gt;</span></a><div class="markdown"><header><h1>Prerequisites for Applications</h1></header><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>This documentation is still <strong>experimental</strong> and details are subject to changes as we iterate. Feel free to share your feedback on the <a href="https://github.com/reactwg/react-native-new-architecture/discussions/8" target="_blank" rel="noopener noreferrer">discussion inside the working group</a> for this page.</p><p>Moreover, it contains several <strong>manual steps</strong>. Please note that this won&#x27;t be representative of the final developer experience once the New Architecture is stable. We&#x27;re working on tools, templates and libraries to help you get started fast on the New Architecture, without having to go through the whole setup.</p></div></div><p>Thereâ€™s a few prerequisites that should be addressed before the new architecture is enabled in your application.</p><h2 class="anchor anchorWithStickyNavbar_23Bc" id="use-a-react-native-nightly-release">Use a React Native nightly release<a class="hash-link" href="#use-a-react-native-nightly-release" title="Direct link to heading">â€‹</a></h2><p>At this time, you must use a React Native nightly release in order to get access to the most up to date changes. Eventually, we will recommend targeting a minimum stable open source release.</p><p>This guide is written with the expectation that youâ€™re using a specific nightly release. As new revisions of this guide are released, the target nightly release may be updated. The specific nightly version that we will be using throughout the rest of this guide is version <code>0.0.0-20220201-2008-79975d146</code>.</p><p>Before upgrading your app to a specific nightly release, we recommend upgrading your app to the latest open source release. By upgrading to a published open source release first, you will be able to take advantage of tools like the <a href="https://react-native-community.github.io/upgrade-helper/" target="_blank" rel="noopener noreferrer">upgrade helper</a> to determine what other changes may be required for your project.</p><p>As of this writing, the latest stable release is <code>0.67.2</code>. Once you have upgraded your project to this version successfully, you may proceed to targeting the <code>0.0.0-20220201-2008-79975d146</code> nightly release. You may target this nightly release the same way youâ€™d target any other version of React Native:</p><div class="codeBlockContainer_1ukp language-bash theme-code-block"><div class="codeBlockContent_3Y8q bash"><pre tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token function" style="color:#79b6f2">yarn</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> react-native@0.0.0-20220201-2008-79975d146</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_23Bc" id="install-react-native-codegen">Install react-native-codegen<a class="hash-link" href="#install-react-native-codegen" title="Direct link to heading">â€‹</a></h2><p>Make sure that you&#x27;re using the latest version of the <a href="https://www.npmjs.com/package/react-native-codegen" target="_blank" rel="noopener noreferrer"><code>react-native-codegen</code></a> NPM package. At the time of writing it&#x27;s <code>0.0.13</code>.</p><div class="codeBlockContainer_1ukp language-bash theme-code-block"><div class="codeBlockContent_3Y8q bash"><pre tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token function" style="color:#79b6f2">yarn</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> react-native-codegen</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you see an error like <code>***TypeError: RNCodegen.generateFromSchemas is not a function.***</code>, it means that you&#x27;re using a older version of <code>react-native-codegen</code>.
Make sure you don&#x27;t have an older version installed under the <code>node_modules/react-native/node_modules</code> folder. You can remove that or reinstall everything in node_modules to fix the problem.</p></div></div><h3 class="anchor anchorWithStickyNavbar_23Bc" id="android-specifics">Android specifics<a class="hash-link" href="#android-specifics" title="Direct link to heading">â€‹</a></h3><p>Using the new architecture on Android has some prerequisites that you need to meet:</p><ol><li>Using Gradle 7.x and Android Gradle Plugin 7.x</li><li>Using the <strong>new React Gradle Plugin</strong></li><li>Building <code>react-native</code> <strong>from Source</strong></li></ol><p>You can update Gradle by running:</p><div class="codeBlockContainer_1ukp language-bash theme-code-block"><div class="codeBlockContent_3Y8q bash"><pre tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token builtin class-name" style="color:#fac863">cd</span><span class="token plain"> android </span><span class="token operator" style="color:#fc929e">&amp;&amp;</span><span class="token plain"> ./gradlew wrapper --gradle-version </span><span class="token number" style="color:#5a9bcf">7.3</span><span class="token plain"> --distribution-type</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">all</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><p>While the AGP version should be updated inside the <strong>top level</strong> <code>build.gradle</code> file at the <code>com.android.tools.build:gradle</code> dependency line.</p><p>If youâ€™re set with it, letâ€™s now install the new Gradle plugin which is distributed through a NPM package called <a href="https://www.npmjs.com/package/react-native-gradle-plugin" target="_blank" rel="noopener noreferrer"><strong><code>react-native-gradle-plugin</code></strong></a>. You can do so with:</p><div class="codeBlockContainer_1ukp language-bash theme-code-block"><div class="codeBlockContent_3Y8q bash"><pre tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token function" style="color:#79b6f2">yarn</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> react-native-gradle-plugin</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><p>You can control if you have the package already installed by doing:</p><div class="codeBlockContainer_1ukp language-bash theme-code-block"><div class="codeBlockContent_3Y8q bash"><pre tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token function" style="color:#79b6f2">ls</span><span class="token plain"> -la node_modules/react-native-gradle-plugin</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><p>Now, you can edit your <strong>top level</strong> <code>settings.gradle</code> file to include the following line at the end of the file:</p><div class="codeBlockContainer_1ukp language-groovy theme-code-block"><div class="codeBlockContent_3Y8q groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">includeBuild(&#x27;../node_modules/react-native-gradle-plugin&#x27;)</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">include(&quot;:ReactAndroid&quot;)</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">project(&quot;:ReactAndroid&quot;).projectDir = file(&#x27;../node_modules/react-native/ReactAndroid&#x27;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><p>Then, edit your <strong>top-level Gradle file</strong> to include the highlighted lines:</p><div class="codeBlockContainer_1ukp language-groovy theme-code-block"><div class="codeBlockContent_3Y8q groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">buildscript {</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    dependencies {</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        // Make sure that AGP is at least at version 7.x</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        classpath(&quot;com.android.tools.build:gradle:7.0.4&quot;)</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        // Add those lines</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        classpath(&quot;de.undercouch:gradle-download-task:4.1.2&quot;)</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><p>Edit your <strong>module-level</strong> <strong>Gradle file</strong> (usually <code>app/build.gradle[.kts]</code>) to include the following:</p><div class="codeBlockContainer_1ukp language-groovy theme-code-block"><div class="codeBlockContent_3Y8q groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">apply plugin: &quot;com.android.application&quot;</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">// Add those lines</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">apply plugin: &quot;com.facebook.react&quot;</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">// Add those lines as well</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">react {</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    reactRoot = rootProject.file(&quot;../node_modules/react-native/&quot;)</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    codegenDir = rootProject.file(&quot;../node_modules/react-native-codegen/&quot;)</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><p>Finally, itâ€™s time to update your project to use the <code>react-native</code> dependency from source, rather than using a precompiled artifact from the NPM package. This is needed as the later setup will rely on building the native code from source.</p><p>Letâ€™s edit your <strong>module level</strong> <code>build.gradle</code> (the one inside <code>app/</code> folder) and change the following line:</p><div class="codeBlockContainer_1ukp language-groovy theme-code-block"><div class="codeBlockContent_3Y8q groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  // Replace this:</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  implementation &quot;com.facebook.react:react-native:+&quot;  // From node_modules</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  // With this:</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  implementation project(&quot;:ReactAndroid&quot;)  // From node_modules</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_23Bc" id="use-hermes">Use Hermes<a class="hash-link" href="#use-hermes" title="Direct link to heading">â€‹</a></h2><p>Hermes is an open-source JavaScript engine optimized for React Native. We highly recommend using Hermes in your application. With Hermes enabled, you will be able to use the JavaScript debugger in Flipper to directly debug your JavaScript code.</p><p>Please <a href="/docs/hermes">follow the instructions on the React Native website</a> in order to enable Hermes in your application.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p><strong>iOS:</strong> If you opt out of using Hermes, you will need to replace <code>HermesExecutorFactory</code> with <code>JSCExecutorFactory</code> in any examples used throughout the rest of this guide.</p></div></div><h2 class="anchor anchorWithStickyNavbar_23Bc" id="ios-enable-c17-language-feature-support">iOS: Enable C++17 language feature support<a class="hash-link" href="#ios-enable-c17-language-feature-support" title="Direct link to heading">â€‹</a></h2><p>Your Xcode project settings need to be updated to support C++17 language features.</p><p><strong>Instructions</strong></p><ol><li>Select your project in the Project navigator on the left (e.g. MyXcodeApp)</li><li>Then, make sure your project is selected in the center pane (as opposed to a particular target in your project, e.g. MyXcodeApp under Project, not under Targets).</li><li>Go to Build Settings</li><li>Search for C++ Language Dialect or CLANG_CXX_LANGUAGE_STANDARD</li><li>Make sure <strong>C++17</strong> is selected from the dropdown menu (or enter &quot;c++17&quot; directly into the value box).</li></ol><p>If done correctly, your diff will show the following changes to your project file:</p><div class="codeBlockContainer_1ukp language-ruby theme-code-block"><div class="codeBlockContent_3Y8q ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">CLANG_CXX_LANGUAGE_STANDARD = &quot;c++17&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Your project should also be configured to support Folly. This should be done automatically once the library dependency is picked up, so no further changes to your project are necessary.</p></div></div><h2 class="anchor anchorWithStickyNavbar_23Bc" id="ios-use-objective-c-mm-extension">iOS: Use Objective-C++ (<code>.mm</code> extension)<a class="hash-link" href="#ios-use-objective-c-mm-extension" title="Direct link to heading">â€‹</a></h2><p>TurboModules can be written using Objective-C or C++. In order to support both cases, any source files that include C++ code should use the <code>.mm</code> file extension. This extension corresponds to Objective-C++, a language variant that allows for the use of a combination of C++ and Objective-C in source files.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Use Xcode to rename existing files to ensure file references persist in your project. You might need to clean the build folder (<em>Project â†’ Clean Build Folder</em>) before re-building the app. If the file is renamed outside of Xcode, you may need to click on the old <code>.m</code> file reference and Locate the new file.</p></div></div><h2 class="anchor anchorWithStickyNavbar_23Bc" id="ios-turbomodules-ensure-your-app-provides-an-rctcxxbridgedelegate">iOS: TurboModules: Ensure your App Provides an <code>RCTCxxBridgeDelegate</code><a class="hash-link" href="#ios-turbomodules-ensure-your-app-provides-an-rctcxxbridgedelegate" title="Direct link to heading">â€‹</a></h2><p>In order to set up the TurboModule system, you will add some code to interact with the bridge in your AppDelegate. Before you start, go ahead and rename your AppDelegate file to use the <code>.mm</code> extension.</p><p>Now you will have your AppDelegate conform to <code>RCTCxxBridgeDelegate</code>. Start by adding the following imports at the top of your AppDelegate file:</p><div class="codeBlockContainer_1ukp language-objc theme-code-block"><div class="codeBlockContent_3Y8q objc"><pre tabindex="0" class="prism-code language-objc codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">import</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property expression operator" style="color:#fc929e">&lt;</span><span class="token macro property expression" style="color:#2aa198">reacthermes</span><span class="token macro property expression operator" style="color:#fc929e">/</span><span class="token macro property expression" style="color:#2aa198">HermesExecutorFactory</span><span class="token macro property expression punctuation" style="color:#657b83">.</span><span class="token macro property expression" style="color:#2aa198">h</span><span class="token macro property expression operator" style="color:#fc929e">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">import</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property expression operator" style="color:#fc929e">&lt;</span><span class="token macro property expression" style="color:#2aa198">React</span><span class="token macro property expression operator" style="color:#fc929e">/</span><span class="token macro property expression" style="color:#2aa198">RCTCxxBridgeDelegate</span><span class="token macro property expression punctuation" style="color:#657b83">.</span><span class="token macro property expression" style="color:#2aa198">h</span><span class="token macro property expression operator" style="color:#fc929e">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">import</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property expression operator" style="color:#fc929e">&lt;</span><span class="token macro property expression" style="color:#2aa198">React</span><span class="token macro property expression operator" style="color:#fc929e">/</span><span class="token macro property expression" style="color:#2aa198">RCTJSIExecutorRuntimeInstaller</span><span class="token macro property expression punctuation" style="color:#657b83">.</span><span class="token macro property expression" style="color:#2aa198">h</span><span class="token macro property expression operator" style="color:#fc929e">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><p>Then, declare your app delegate as a <code>RCTCxxBridgeDelegate</code> provider:</p><div class="codeBlockContainer_1ukp language-objc theme-code-block"><div class="codeBlockContent_3Y8q objc"><pre tabindex="0" class="prism-code language-objc codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">@interface</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">AppDelegate</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">RCTCxxBridgeDelegate</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">@end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div><p>To conform to the <code>RCTCxxBridgeDelegate</code> protocol, you will need to implement the <code>jsExecutorFactoryForBridge:</code> method. Typically, this is where you would return a <code>JSCExecutorFactory</code> or <code>HermesExecutorFactory</code>, and we will use it to install our TurboModules bindings later on.</p><p>You can implement the <code>jsExecutorFactoryForBridge:</code> method like this:</p><div class="codeBlockContainer_1ukp language-objc theme-code-block"><div class="codeBlockContent_3Y8q objc"><pre tabindex="0" class="prism-code language-objc codeBlock_2Xgr thin-scrollbar" style="color:#FFFFFF;background:#282C34"><code class="codeBlockLines_3Zfi"><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token macro property directive-hash" style="color:#2aa198">#</span><span class="token macro property directive keyword" style="color:#c5a5c5">pragma</span><span class="token macro property" style="color:#2aa198"> </span><span class="token macro property expression" style="color:#2aa198">mark </span><span class="token macro property expression operator" style="color:#fc929e">-</span><span class="token macro property expression" style="color:#2aa198"> RCTCxxBridgeDelegate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token operator" style="color:#fc929e">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">std</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain">unique_ptr</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">facebook</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain">react</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain">JSExecutorFactory</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain">jsExecutorFactoryForBridge</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">RCTBridge </span><span class="token operator" style="color:#fc929e">*</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain">bridge</span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> std</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain">make_unique</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">facebook</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain">react</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain">HermesExecutorFactory</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">facebook</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain">react</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">:</span><span class="token function" style="color:#79b6f2">RCTJSIExecutorRuntimeInstaller</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">bridge</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">facebook</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain">jsi</span><span class="token punctuation" style="color:#657b83">:</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain">Runtime </span><span class="token operator" style="color:#fc929e">&amp;</span><span class="token plain">runtime</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token operator" style="color:#fc929e">!</span><span class="token plain">bridge</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju clean-btn">Copy</button></div></div></div><footer class="docMetadata row docusaurus-mt-lg"><div class="col"><a href="https://github.com/reactnativecn/react-native-website/blob/production/cnwebsite/../cndocs/new-architecture-app-intro.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_1CBY" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_1szQ"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_rbnR thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#use-a-react-native-nightly-release" class="table-of-contents__link toc-highlight">Use a React Native nightly release</a></li><li><a href="#install-react-native-codegen" class="table-of-contents__link toc-highlight">Install react-native-codegen</a><ul><li><a href="#android-specifics" class="table-of-contents__link toc-highlight">Android specifics</a></li></ul></li><li><a href="#use-hermes" class="table-of-contents__link toc-highlight">Use Hermes</a></li><li><a href="#ios-enable-c17-language-feature-support" class="table-of-contents__link toc-highlight">iOS: Enable C++17 language feature support</a></li><li><a href="#ios-use-objective-c-mm-extension" class="table-of-contents__link toc-highlight">iOS: Use Objective-C++ (<code>.mm</code> extension)</a></li><li><a href="#ios-turbomodules-ensure-your-app-provides-an-rctcxxbridgedelegate" class="table-of-contents__link toc-highlight">iOS: TurboModules: Ensure your App Provides an <code>RCTCxxBridgeDelegate</code></a></li></ul><div class="wwads-cn wwads-vertical" data-id="58" style="max-width:200px;margin-top:20px"></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">React Native ä¸­æ–‡ç½‘ Â© 2022 æ­¦æ±‰é’ç½—ç½‘ç»œç§‘æŠ€æœ‰é™å…¬å¸
      <a style="margin-left:10px" href="http://beian.miit.gov.cn/">é„‚ICPå¤‡20002031å·-3</a>
      <img style="width:25px" src="//img.alicdn.com/tfs/TB1..50QpXXXXX7XpXXXXXXXXXX-40-40.png" alt="é„‚å…¬ç½‘å®‰å¤‡ 42011202001821å·">
      <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42011202001821">é„‚å…¬ç½‘å®‰å¤‡ 42011202001821å·</a>
      </div></div></div></footer></div>
<script src="/assets/js/runtime~main.a146ad94.js"></script>
<script src="/assets/js/main.873c95ea.js"></script>
</body>
</html>
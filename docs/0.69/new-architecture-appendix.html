<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-0.69 plugin-docs plugin-id-default docs-doc-id-new-architecture-appendix">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Appendix · React Native 中文网</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:image" content="https://reactnative.cn/img/logo-og.png"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:url" content="https://reactnative.cn"><meta data-rh="true" property="og:image" content="img/logo-og.png"><meta data-rh="true" name="docusaurus_version" content="0.69"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.69"><meta data-rh="true" name="docsearch:version" content="0.69"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.69"><meta data-rh="true" property="og:title" content="Appendix · React Native 中文网"><meta data-rh="true" name="description" content="I. Flow Type to Native Type Mapping"><meta data-rh="true" property="og:description" content="I. Flow Type to Native Type Mapping"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://reactnative.cn/docs/0.69/new-architecture-appendix"><link data-rh="true" rel="alternate" href="https://reactnative.cn/docs/0.69/new-architecture-appendix" hreflang="en"><link data-rh="true" rel="alternate" href="https://reactnative.cn/docs/0.69/new-architecture-appendix" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://GJGDC5L5HP-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-63485149-4","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-63485149-4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-63485149-4",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="React Native 中文网" href="/opensearch.xml">


<script src="//snack.expo.dev/embed.js" defer="defer"></script>
<script src="//cdn.wwads.cn/js/makemoney.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.b58cb3e6.css">
<link rel="preload" href="/assets/js/runtime~main.b3d27eb8.js" as="script">
<link rel="preload" href="/assets/js/main.d1b17d8a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_oPtH" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/header_logo.svg" alt="React Native 中文网" class="themedImage_BQGR themedImage--light_HAxW"><img src="/img/header_logo.svg" alt="React Native 中文网" class="themedImage_BQGR themedImage--dark_bGx0"></div><b class="navbar__title text--truncate">React Native 中文网</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/0.69/getting-started">0.69</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/new-architecture-appendix">Next</a></li><li><a class="dropdown__link" href="/docs/new-architecture-appendix">0.72</a></li><li><a class="dropdown__link" href="/docs/0.71/new-architecture-appendix">0.71</a></li><li><a class="dropdown__link" href="/docs/0.70/new-architecture-appendix">0.70</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.69/new-architecture-appendix">0.69</a></li><li><a class="dropdown__link" href="/docs/0.68/new-architecture-appendix">0.68</a></li><li><a class="dropdown__link" href="/versions">所有版本</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">开发文档</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.69/getting-started">入门指南</a></li><li><a class="dropdown__link" href="/docs/0.69/components-and-apis">组件</a></li><li><a class="dropdown__link" href="/docs/0.69/accessibilityinfo">API</a></li><li><a class="dropdown__link" href="/architecture/overview">架构</a></li></ul></div><a href="//time.geekbang.org/column/intro/100110101?code=FAqHFVRUur%2FgAP-yJQWitk9ieF80imRky3PVsIs%2FX6A%3D" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link hot-link">实战课<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="//github.com/reactnativecn/react-native-website/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">讨论<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="//pushy.reactnative.cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link hot-link">热更新<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/about">关于</a><a href="//github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_WqAV"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r docsWrapper_ct1J"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docPage_KLoz"><aside class="theme-doc-sidebar-container docSidebarContainer_y0RQ"><div class="sidebarViewport_EJ1r"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.69/getting-started">入门基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.69/environment-setup">环境搭建</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.69/running-on-device">开发流程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.69/style">设计</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.69/performance">性能调优</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.69/javascript-environment">JavaScript 运行环境</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.69/native-modules-intro">原生模块</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.69/native-components-android">原生 UI 组件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/0.69/new-architecture-intro">新架构</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/new-architecture-intro">启用新架构</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0">在第三方库中启用</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/new-architecture-library-intro">在库中启用的预备工作</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/new-architecture-library-android">在 Android 库中启用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/new-architecture-library-ios">在 iOS 库中启用</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0">在应用中启用</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/new-architecture-app-intro">在应用中启用的预备工作</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/new-architecture-app-modules-android">在 Android 上启用 TurboModule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/new-architecture-app-modules-ios">在 iOS 上启用 TurboModule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/new-architecture-app-renderer-android">在 Android 上启用 Fabric</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/new-architecture-app-renderer-ios">在 iOS 上启用 Fabric</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/react-18-and-react-native">React 18 与 React Native</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.69/new-architecture-troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0.69/new-architecture-appendix">Appendix</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.69/headless-js-android">Android 与 iOS 指南</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_sTIZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->React Native 中文网<!-- --> <b>0.69</b> 版的文档，现已不再积极维护。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/docs/new-architecture-appendix">最新版本</a></b> (<!-- -->0.72<!-- -->)。</div></div><div class="docItemContainer_tjFy"><article><a href="https://time.geekbang.org/column/intro/100110101?code=FAqHFVRUur%2FgAP-yJQWitk9ieF80imRky3PVsIs%2FX6A%3D" target="_blank" style="display:block;padding:12px;background-color:#eee;color:#666;margin-bottom:15px"><span style="font-weight:bold;color:#05a5d1">新架构实战课</span> <!-- -->实操 + 基建 + 原理全维度包揽，抢先掌握 React Native 新架构精髓<!-- --> <span style="border:solid 1px #666;padding:4px 6px;margin-left:8px;vertical-align:middle">立即查看 &gt;</span></a><span class="theme-doc-version-badge badge badge--secondary">Version: 0.69</span><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Appendix</h1></header><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_uH4V"><div class="admonitionHeading_P5_N"><span class="admonitionIcon_MF44"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_yySL"><p>This documentation is still <strong>experimental</strong> and details are subject to changes as we iterate. Feel free to share your feedback on the <a href="https://github.com/reactwg/react-native-new-architecture/discussions/8" target="_blank" rel="noopener noreferrer">discussion inside the working group</a> for this page.</p><p>Moreover, it contains several <strong>manual steps</strong>. Please note that this won&#x27;t be representative of the final developer experience once the New Architecture is stable. We&#x27;re working on tools, templates and libraries to help you get started fast on the New Architecture, without having to go through the whole setup.</p></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="i-flow-type-to-native-type-mapping">I. Flow Type to Native Type Mapping<a href="#i-flow-type-to-native-type-mapping" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>You may use the following table as a reference for which types are supported and what they map to in each platform:</p><table><thead><tr><th>Flow Type</th><th>Nullable Support?</th><th>Android (Java)</th><th>iOS</th><th>Note</th></tr></thead><tbody><tr><td><code>string</code></td><td><code>?string</code></td><td><code>String</code></td><td><code>NSString</code></td><td></td></tr><tr><td><code>boolean</code></td><td><code>?boolean</code></td><td><code>Boolean</code></td><td><code>NSNumber</code></td><td></td></tr><tr><td><code>number</code></td><td>No</td><td><code>double</code></td><td><code>NSNumber</code></td><td></td></tr><tr><td><code>{<!-- -->|<!-- --> foo: string, ... <!-- -->|<!-- -->}</code></td><td><code>?{<!-- -->|<!-- --> foo: string, ...<!-- -->|<!-- -->}</code></td><td></td><td></td><td>Object literal. This is recommended over simply using Object, for type safety.</td></tr><tr><td><code>Object</code></td><td><code>?Object</code></td><td><code>ReadableMap</code></td><td><code>@{} (untyped dictionary)</code></td><td>Recommended to use object literal (see above).</td></tr><tr><td><code>Array&lt;*&gt;</code></td><td><code>?Array&lt;*&gt;</code></td><td><code>ReadableArray</code></td><td><code>NSArray</code> (or <code>RCTConvertVecToArray</code> when used inside objects)</td><td></td></tr><tr><td><code>Function</code></td><td><code>?Function</code></td><td></td><td></td><td></td></tr><tr><td><code>Promise&lt;*&gt;</code></td><td><code>?Promise&lt;*&gt;</code></td><td><code>com.facebook.react.bridge.Promise</code></td><td><code>RCTPromiseResolve</code> and <code>RCTPromiseRejectBlock</code></td><td></td></tr><tr><td>Type aliases of the above</td><td>Yes</td><td></td><td></td><td></td></tr><tr><td>Type Unions <code>&#x27;SUCCESS&#x27;<!-- -->|<!-- -->&#x27;FAIL&#x27;</code></td><td>Only as callbacks.</td><td></td><td></td><td>Type unions only supported as callbacks.</td></tr><tr><td>Callbacks: <code>( ) =&gt;</code></td><td>Yes</td><td><code>com.facebook.react.bridge.Callback</code></td><td><code>RCTResponseSenderBlock</code></td><td>Callback functions are not type checked, and are generalized as Objects.</td></tr></tbody></table><p>You may also find it useful to refer to the JavaScript specifications for the core modules in React Native. These are located inside the <code>Libraries/</code> directory in the React Native repository.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="ii-invoking-the-code-gen-during-development">II. Invoking the code-gen during development<a href="#ii-invoking-the-code-gen-during-development" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><blockquote><p>This section contains information specific to v0.66 of React Native.</p></blockquote><p>The code-gen is typically invoked at build time, but you may find it useful to generate your native interface code on demand for troubleshooting.</p><p>If you wish to invoke the codegen manually, you have two options:</p><ol><li>Invoking a Gradle task directly (Android).</li><li>Invoking a script manually.</li></ol><h3 class="anchor anchorWithStickyNavbar_JmGV" id="invoking-a-gradle-task-directly">Invoking a Gradle task directly<a href="#invoking-a-gradle-task-directly" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>You can trigger the code-gen by invoking the following task:</p><div class="language-bash codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-bash codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">./gradlew generateCodegenArtifactsFromSchema --rerun-tasks</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The extra <code>--rerun-tasks</code> flag is added to make sure Gradle is ignoring the <code>UP-TO-DATE</code> checks for this task. You should not need it during normal development.</p><p>The <code>generateCodegenArtifactsFromSchema</code> task normally runs before the <code>preBuild</code> task, so you should not need to invoke it manually, but it will be triggered before your builds.</p><h3 class="anchor anchorWithStickyNavbar_JmGV" id="invoking-the-script-manually">Invoking the script manually<a href="#invoking-the-script-manually" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Alternatively, you can invoke the Codegen directly, bypassing the Gradle Plugin or CocoaPods infrastructure.
This can be done with the following commands.</p><p>The parameters to provide will look quite familiar to you now that you have already configured the Gradle plugin or CocoaPods library.</p><h4 class="anchor anchorWithStickyNavbar_JmGV" id="generating-the-schema-file">Generating the schema file<a href="#generating-the-schema-file" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>First, you’ll need to generate a schema file from your JavaScript sources. You only need to do this whenever your JavaScript specs change. The script to generate this schema is provided as part of the <code>react-native-codegen</code> package. If running this from within your React Native application, you can use the package from <code>node_modules</code> directly:</p><div class="language-bash codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-bash codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token function" style="color:#79b6f2">node</span><span class="token plain"> node_modules/react-native-codegen/lib/cli/combine/combine-js-to-schema-cli.js </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">output_file_schema_json</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">javascript_sources_dir</span><span class="token operator" style="color:#fc929e">&gt;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>The source for the <code>react-native-codegen</code> is available in the React Native repository, under <code>packages/react-native-codegen</code>. Run <code>yarn install</code> and <code>yarn build</code> in that directory to build your own <code>react-native-codegen</code> package from source. In most cases, you will not want to do this as the guide assumes the use of the <code>react-native-codegen</code> package version that is associated with the relevant React Native nightly release.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_JmGV" id="generating-the-native-code-artifacts">Generating the native code artifacts<a href="#generating-the-native-code-artifacts" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>Once you have a schema file for your native modules or components, you can use a second script to generate the actual native code artifacts for your library. You can use the same schema file generated by the previous script.</p><div class="language-bash codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-bash codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token function" style="color:#79b6f2">node</span><span class="token plain"> node_modules/react-native/scripts/generate-specs-cli.js </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  --platform </span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">ios</span><span class="token operator" style="color:#fc929e">|</span><span class="token plain">android</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  --schemaPath </span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">generated_schema_json_file</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  --outputDir </span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain">output_dir</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">--libraryName library_name</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">--javaPackageName java_package_name</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">--libraryType all</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">default</span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">|</span><span class="token plain">modules</span><span class="token operator" style="color:#fc929e">|</span><span class="token plain">components</span><span class="token punctuation" style="color:#657b83">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>NOTE:</strong> The output artifacts of the code-gen are inside the build folder and should not be committed.
They should be considered only for reference.</p></blockquote><h5 class="anchor anchorWithStickyNavbar_JmGV" id="example">Example<a href="#example" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h5><p>The following is a basic example of invoking the code-gen script to generate native iOS interface code for a library that provides native modules. The JavaScript spec sources for this library are located in a <code>js/</code> subdirectory, and this library’s native code expects the native interfaces to be available in the <code>ios</code> subdirectory.</p><div class="language-bash codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-bash codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Generate schema - only needs to be done whenever JS specs change</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function" style="color:#79b6f2">node</span><span class="token plain"> node_modules/react-native-codegen/lib/cli/combine/combine-js-to-schema-cli.js /tmp/schema.json ./js</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Generate native code artifacts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function" style="color:#79b6f2">node</span><span class="token plain"> node_modules/react-native/scripts/generate-specs-cli.js </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  --platform ios </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  --schemaPath /tmp/schema.json </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  --outputDir ./ios </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  --libraryName MyLibSpecs </span><span class="token punctuation" style="color:#657b83">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  --libraryType modules</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above example, the code-gen script will generate several files: <code>MyLibSpecs.h</code> and <code>MyLibSpecs-generated.mm</code>, as well as a handful of <code>.h</code> and <code>.cpp</code> files, all located in the <code>ios</code> directory.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="iii-note-on-existing-apps">III. Note on Existing Apps<a href="#iii-note-on-existing-apps" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>This guide provides instructions for migrating an application that is based on the default app template that is provided by React Native. If your app has deviated from the template, or you are working with an application that was never based off the template, then the following sections might help.</p><h3 class="anchor anchorWithStickyNavbar_JmGV" id="finding-your-bridge-delegate">Finding your bridge delegate<a href="#finding-your-bridge-delegate" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>This guide assumes that the <code>AppDelegate</code> is configured as the bridge delegate. If you are not sure which is your bridge delegate, then place a breakpoint in <code>RCTBridge</code> and <code>RCTCxxBridge</code>, run your app, and inspect <code>self.delegate</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/reactnativecn/react-native-website/blob/production/cnwebsite/../cndocs/new-architecture-appendix.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>改进此文档</a></div><div class="col lastUpdated_pbO5"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0.69/new-architecture-troubleshooting"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Troubleshooting</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0.69/headless-js-android"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Headless JS（后台任务）</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#i-flow-type-to-native-type-mapping" class="table-of-contents__link toc-highlight">I. Flow Type to Native Type Mapping</a></li><li><a href="#ii-invoking-the-code-gen-during-development" class="table-of-contents__link toc-highlight">II. Invoking the code-gen during development</a><ul><li><a href="#invoking-a-gradle-task-directly" class="table-of-contents__link toc-highlight">Invoking a Gradle task directly</a></li><li><a href="#invoking-the-script-manually" class="table-of-contents__link toc-highlight">Invoking the script manually</a></li></ul></li><li><a href="#iii-note-on-existing-apps" class="table-of-contents__link toc-highlight">III. Note on Existing Apps</a><ul><li><a href="#finding-your-bridge-delegate" class="table-of-contents__link toc-highlight">Finding your bridge delegate</a></li></ul></li></ul><div class="wwads-cn wwads-vertical" data-id="58" style="max-width:200px;margin-top:20px"></div> </div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">React Native 中文网 © 2023 武汉青罗网络科技有限公司
      <a style="margin-left:10px" href="http://beian.miit.gov.cn/">鄂ICP备20002031号-3</a>
      <img style="width:25px" src="//img.alicdn.com/tfs/TB1..50QpXXXXX7XpXXXXXXXXXX-40-40.png" alt="鄂公网安备 42011202001821号">
      <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42011202001821">鄂公网安备 42011202001821号</a>
      </div></div></div></footer></div>
<script src="/assets/js/runtime~main.b3d27eb8.js"></script>
<script src="/assets/js/main.d1b17d8a.js"></script>
</body>
</html>
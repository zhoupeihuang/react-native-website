"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[78048],{35318:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>d});var a=t(27378);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=a.createContext({}),c=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},s=function(e){var n=c(e.components);return a.createElement(p.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=c(t),d=r,b=u["".concat(p,".").concat(d)]||u[d]||m[d]||o;return t?a.createElement(b,i(i({ref:n},s),{},{components:t})):a.createElement(b,i({ref:n},s))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=u;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},11674:(e,n,t)=>{t.d(n,{Z:()=>i});var a=t(63445);const r=!!a.Z.canUseDOM&&navigator.platform.startsWith("Mac"),o=!!a.Z.canUseDOM&&navigator.platform.startsWith("Win"),i={defaultGuide:"native",defaultOs:r?"macos":o?"windows":"linux",defaultPackageManager:"npm",defaultPlatform:r?"ios":"android",defaultSyntax:"functional",getDevNotesTabs:(e=["android","ios","web","windows"])=>[e.includes("android")?{label:"Android",value:"android"}:void 0,e.includes("ios")?{label:"iOS",value:"ios"}:void 0,e.includes("web")?{label:"Web",value:"web"}:void 0,e.includes("windows")?{label:"Windows",value:"windows"}:void 0].filter(Boolean),guides:[{label:"\u5b8c\u6574\u539f\u751f\u73af\u5883",value:"native"},{label:"\u7b80\u6613\u6c99\u76d2\u73af\u5883",value:"quickstart"}],oses:[{label:"macOS",value:"macos"},{label:"Windows",value:"windows"},{label:"Linux",value:"linux"}],packageManagers:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],platforms:[{label:"Android",value:"android"},{label:"iOS",value:"ios"}],syntax:[{label:"\u51fd\u6570\u5f0f\u7ec4\u4ef6",value:"functional"},{label:"Class \u7ec4\u4ef6",value:"classical"}]}},86386:(e,n,t)=>{t.d(n,{Z:()=>m});var a=t(27378),r=t(38944);const o="tabItem_wHwb";var i=Object.defineProperty,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,n,t)=>n in e?i(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;function m({children:e,hidden:n,className:t}){return a.createElement("div",((e,n)=>{for(var t in n||(n={}))p.call(n,t)&&s(e,t,n[t]);if(l)for(var t of l(n))c.call(n,t)&&s(e,t,n[t]);return e})({role:"tabpanel",className:(0,r.Z)(o,t)},{hidden:n}),e)}},48375:(e,n,t)=>{t.d(n,{Z:()=>A});var a=t(27378),r=t(38944),o=t(12112),i=t(35331),l=t(14953),p=t(27886),c=t(7106),s=Object.defineProperty,m=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,n,t)=>n in e?s(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;function y(e){return function(e){return a.Children.map(e,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a})))}function w(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=null!=n?n:y(t);return function(e){const n=(0,p.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function v({value:e,tabValues:n}){return n.some((n=>n.value===e))}function k({queryString:e=!1,groupId:n}){const t=(0,i.k6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:e,groupId:n});return[(0,l._X)(r),(0,a.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(t.location.search);var a,o;n.set(r,e),t.replace((a=((e,n)=>{for(var t in n||(n={}))b.call(n,t)&&f(e,t,n[t]);if(d)for(var t of d(n))g.call(n,t)&&f(e,t,n[t]);return e})({},t.location),o={search:n.toString()},m(a,u(o))))}),[r,t])]}function C(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,o=w(e),[i,l]=(0,a.useState)((()=>function({defaultValue:e,tabValues:n}){var t;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!v({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=null!=(t=n.find((e=>e.default)))?t:n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:o}))),[p,s]=k({queryString:t,groupId:r}),[m,u]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,r]=(0,c.Nk)(n);return[t,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:r}),d=(()=>{const e=null!=p?p:m;return v({value:e,tabValues:o})?e:null})();(0,a.useLayoutEffect)((()=>{d&&l(d)}),[d]);return{selectedValue:i,selectValue:(0,a.useCallback)((e=>{if(!v({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),s(e),u(e)}),[s,u,o]),tabValues:o}}var N=t(14185);const h="tabList_J5MA",M="tabItem_l0OV";var V=Object.defineProperty,O=Object.defineProperties,_=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,S=(e,n,t)=>n in e?V(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,x=(e,n)=>{for(var t in n||(n={}))T.call(n,t)&&S(e,t,n[t]);if(E)for(var t of E(n))I.call(n,t)&&S(e,t,n[t]);return e};function j({className:e,block:n,selectedValue:t,selectValue:i,tabValues:l}){const p=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.o5)(),s=e=>{const n=e.currentTarget,a=p.indexOf(n),r=l[a].value;r!==t&&(c(n),i(r))},m=e=>{var n,t;let a=null;switch(e.key){case"Enter":s(e);break;case"ArrowRight":{const t=p.indexOf(e.currentTarget)+1;a=null!=(n=p[t])?n:p[0];break}case"ArrowLeft":{const n=p.indexOf(e.currentTarget)-1;a=null!=(t=p[n])?t:p[p.length-1];break}}null==a||a.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},e)},l.map((({value:e,label:n,attributes:o})=>{return a.createElement("li",(i=x({role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,key:e,ref:e=>p.push(e),onKeyDown:m,onClick:s},o),l={className:(0,r.Z)("tabs__item",M,null==o?void 0:o.className,{"tabs__item--active":t===e})},O(i,_(l))),null!=n?n:e);var i,l})))}function R({lazy:e,children:n,selectedValue:t}){if(n=Array.isArray(n)?n:[n],e){const e=n.find((e=>e.props.value===t));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},n.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t}))))}function P(e){const n=C(e);return a.createElement("div",{className:(0,r.Z)("tabs-container",h)},a.createElement(j,x(x({},e),n)),a.createElement(R,x(x({},e),n)))}function A(e){const n=(0,N.Z)();return a.createElement(P,x({key:String(n)},e))}},38286:(e,n,t)=>{t.d(n,{ZP:()=>d});var a=t(35318),r=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,n,t)=>n in e?r(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,m=(e,n)=>{for(var t in n||(n={}))p.call(n,t)&&s(e,t,n[t]);if(l)for(var t of l(n))c.call(n,t)&&s(e,t,n[t]);return e};const u={toc:[]};function d(e){var n,t=e,{components:r}=t,s=((e,n)=>{var t={};for(var a in e)p.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&l)for(var a of l(e))n.indexOf(a)<0&&c.call(e,a)&&(t[a]=e[a]);return t})(t,["components"]);return(0,a.kt)("wrapper",(n=m(m({},u),s),o(n,i({components:r,mdxType:"MDXLayout"}))),(0,a.kt)("admonition",m({},{title:"\u6ce8\u610f",type:"caution"}),(0,a.kt)("p",{parentName:"admonition"},"\u8fd9\u4e2a\u6587\u6863\u4ecd\u7136\u662f",(0,a.kt)("strong",{parentName:"p"},"\u5b9e\u9a8c\u6027"),"\u7684\uff0c\u968f\u7740\u6211\u4eec\u7684\u8fed\u4ee3\uff0c\u7ec6\u8282\u4f1a\u6709\u53d8\u5316\u3002\u6b22\u8fce\u5728",(0,a.kt)("a",m({parentName:"p"},{href:"https://github.com/reactwg/react-native-new-architecture/discussions/8"}),"\u5de5\u4f5c\u5c0f\u7ec4\u5185\u7684\u8ba8\u8bba"),"\u4e2d\u5206\u4eab\u4f60\u7684\u53cd\u9988\u3002"),(0,a.kt)("p",{parentName:"admonition"},"\u6b64\u5916\uff0c\u5b83\u8fd8\u5305\u542b\u51e0\u4e2a",(0,a.kt)("strong",{parentName:"p"},"\u624b\u52a8\u6b65\u9aa4"),"\u3002\u8bf7\u6ce8\u610f\u65b0\u67b6\u6784\u5c1a\u672a\u7a33\u5b9a\u4e0b\u6765\uff0c\u6700\u7ec8\u7684\u5f00\u53d1\u8005\u4f53\u9a8c\u4f1a\u7ee7\u7eed\u8fed\u4ee3\u6539\u5584\u3002\u6211\u4eec\u6b63\u5728\u52aa\u529b\u5f00\u53d1\u5de5\u5177\u3001\u6a21\u677f\u548c\u5e93\uff0c\u4ee5\u5e2e\u52a9\u4f60\u5728\u65b0\u67b6\u6784\u4e0a\u5feb\u901f\u5165\u95e8\uff0c\u800c\u4e0d\u9700\u8981\u7ecf\u5386\u6574\u4e2a\u8bbe\u7f6e\u8fc7\u7a0b\u3002")))}d.isMDXComponent=!0},39456:(e,n,t)=>{t.d(n,{ZP:()=>d});var a=t(35318),r=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,n,t)=>n in e?r(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,m=(e,n)=>{for(var t in n||(n={}))p.call(n,t)&&s(e,t,n[t]);if(l)for(var t of l(n))c.call(n,t)&&s(e,t,n[t]);return e};const u={toc:[]};function d(e){var n,t=e,{components:r}=t,s=((e,n)=>{var t={};for(var a in e)p.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&l)for(var a of l(e))n.indexOf(a)<0&&c.call(e,a)&&(t[a]=e[a]);return t})(t,["components"]);return(0,a.kt)("wrapper",(n=m(m({},u),s),o(n,i({components:r,mdxType:"MDXLayout"}))),(0,a.kt)("admonition",m({},{title:"\u6ce8\u610f",type:"caution"}),(0,a.kt)("p",{parentName:"admonition"},"\u65b0\u67b6\u6784\u5bf9\u4e8e TypeScript \u7684\u652f\u6301\u5c1a\u5904\u4e8e beta \u6d4b\u8bd5\u9636\u6bb5\u3002")))}d.isMDXComponent=!0},36895:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>k,contentTitle:()=>w,default:()=>h,frontMatter:()=>y,metadata:()=>v,toc:()=>C});var a=t(35318),r=t(48375),o=t(86386),i=t(11674),l=t(39456),p=t(38286),c=Object.defineProperty,s=Object.defineProperties,m=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,g=(e,n,t)=>n in e?c(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,f=(e,n)=>{for(var t in n||(n={}))d.call(n,t)&&g(e,t,n[t]);if(u)for(var t of u(n))b.call(n,t)&&g(e,t,n[t]);return e};const y={id:"backward-compatibility-fabric-components",title:"\u4f7f Fabric \u7ec4\u4ef6\u4e0e\u4f20\u7edf\u539f\u751f\u7ec4\u4ef6\u517c\u5bb9"},w=void 0,v={unversionedId:"the-new-architecture/backward-compatibility-fabric-components",id:"the-new-architecture/backward-compatibility-fabric-components",title:"\u4f7f Fabric \u7ec4\u4ef6\u4e0e\u4f20\u7edf\u539f\u751f\u7ec4\u4ef6\u517c\u5bb9",description:"\u521b\u5efa\u5411\u540e\u517c\u5bb9\u7684 Fabric \u539f\u751f\u7ec4\u4ef6\u9700\u8981\u4e86\u89e3\u5982\u4f55\u521b\u5efa\u4f20\u7edf\u7684\u539f\u751f\u7ec4\u4ef6\u3002\u8981\u56de\u5fc6\u8fd9\u4e9b\u6982\u5ff5\uff0c\u8bf7\u67e5\u770b\u6b64\u6307\u5357\u3002",source:"@site/../cndocs/the-new-architecture/backward-compatibility-fabric-components.md",sourceDirName:"the-new-architecture",slug:"/the-new-architecture/backward-compatibility-fabric-components",permalink:"/docs/next/the-new-architecture/backward-compatibility-fabric-components",draft:!1,editUrl:"https://github.com/reactnativecn/react-native-website/blob/production/cnwebsite/../cndocs/the-new-architecture/backward-compatibility-fabric-components.md",tags:[],version:"current",frontMatter:{id:"backward-compatibility-fabric-components",title:"\u4f7f Fabric \u7ec4\u4ef6\u4e0e\u4f20\u7edf\u539f\u751f\u7ec4\u4ef6\u517c\u5bb9"},sidebar:"docs",previous:{title:"TurboModules as Native Modules",permalink:"/docs/next/the-new-architecture/backward-compatibility-turbomodules"},next:{title:"\u8fc1\u79fb\u5230\u65b0\u67b6\u6784",permalink:"/docs/next/new-architecture-intro"}},k={},C=[{value:"\u914d\u7f6e Fabric \u539f\u751f\u7ec4\u4ef6\u4f9d\u8d56",id:"\u914d\u7f6e-fabric-\u539f\u751f\u7ec4\u4ef6\u4f9d\u8d56",level:2},{value:'<a name="dependencies-ios" />iOS',id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"\u66f4\u65b0\u4ee3\u7801\u5e93",id:"\u66f4\u65b0\u4ee3\u7801\u5e93",level:2},{value:"iOS",id:"ios-1",level:3},{value:"Android",id:"android-1",level:3},{value:"\u7edf\u4e00 JavaScript \u89c4\u8303",id:"\u7edf\u4e00-javascript-\u89c4\u8303",level:2}],N={toc:C};function h(e){var n,t=e,{components:c}=t,g=((e,n)=>{var t={};for(var a in e)d.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&u)for(var a of u(e))n.indexOf(a)<0&&b.call(e,a)&&(t[a]=e[a]);return t})(t,["components"]);return(0,a.kt)("wrapper",(n=f(f({},N),g),s(n,m({components:c,mdxType:"MDXLayout"}))),(0,a.kt)(p.ZP,{mdxType:"NewArchitectureWarning"}),(0,a.kt)("admonition",f({},{title:"\u63d0\u793a",type:"info"}),(0,a.kt)("p",{parentName:"admonition"},"\u521b\u5efa\u5411\u540e\u517c\u5bb9\u7684 Fabric \u539f\u751f\u7ec4\u4ef6\u9700\u8981\u4e86\u89e3\u5982\u4f55\u521b\u5efa\u4f20\u7edf\u7684\u539f\u751f\u7ec4\u4ef6\u3002\u8981\u56de\u5fc6\u8fd9\u4e9b\u6982\u5ff5\uff0c\u8bf7\u67e5\u770b\u6b64",(0,a.kt)("a",f({parentName:"p"},{href:"pillars-fabric-components"}),"\u6307\u5357"),"\u3002"),(0,a.kt)("p",{parentName:"admonition"},"\u4ec5\u5f53\u6b63\u786e\u8bbe\u7f6e\u4e86\u65b0\u67b6\u6784\u65f6\uff0cFabric \u539f\u751f\u7ec4\u4ef6\u624d\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002\u5982\u679c\u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a\u8981\u8fc1\u79fb\u5230\u65b0\u67b6\u6784\u7684\u5e93\uff0c\u8bf7\u53c2\u9605",(0,a.kt)("a",f({parentName:"p"},{href:"../new-architecture-intro"}),"\u8fc1\u79fb\u6307\u5357"),"\u3002")),(0,a.kt)("p",null,"\u521b\u5efa\u5411\u540e\u517c\u5bb9\u7684 Fabric \u539f\u751f\u7ec4\u4ef6\u53ef\u4ee5\u8ba9\u7528\u6237\u72ec\u7acb\u4e8e\u4ed6\u4eec\u4f7f\u7528\u7684\u67b6\u6784\u7ee7\u7eed\u5229\u7528\u60a8\u7684\u5e93\u3002\u521b\u5efa\u8fd9\u6837\u4e00\u4e2a\u7ec4\u4ef6\u9700\u8981\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u914d\u7f6e\u5e93\uff0c\u4f7f\u5f97\u4f9d\u8d56\u9879\u80fd\u591f\u4e3a\u65e7\u548c\u65b0\u67b6\u6784\u6b63\u786e\u8bbe\u7f6e\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u66f4\u65b0\u4ee3\u7801\u5e93\uff0c\u4ee5\u4fbf\u5728\u4e0d\u53ef\u7528\u65f6\u4e0d\u7f16\u8bd1\u65b0\u67b6\u6784\u7c7b\u578b\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u7edf\u4e00 JavaScript API\uff0c\u4f7f\u5f97\u7528\u6237\u4ee3\u7801\u65e0\u9700\u66f4\u6539\u3002")),(0,a.kt)("admonition",f({},{title:"\u63d0\u793a",type:"info"}),(0,a.kt)("p",{parentName:"admonition"},"\u6211\u4eec\u5c06\u5728\u672c\u6307\u5357\u4e2d\u4f7f\u7528\u4ee5\u4e0b",(0,a.kt)("strong",{parentName:"p"},"\u672f\u8bed"),"\uff1a"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u4f20\u7edf\u539f\u751f\u7ec4\u4ef6")," - \u7528\u4e8e\u6307\u4ee3\u8fd0\u884c\u5728\u65e7\u7248React Native\u67b6\u6784\u4e0a\u7684\u7ec4\u4ef6\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Fabric\u539f\u751f\u7ec4\u4ef6")," - \u7528\u4e8e\u6307\u4ee3\u5df2\u7ecf\u9002\u914d\u65b0\u7248\u539f\u751f\u6e32\u67d3\u5668Fabric\u7684\u7ec4\u4ef6\u3002\u4e3a\u7b80\u6d01\u8d77\u89c1\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a",(0,a.kt)("strong",{parentName:"li"},"Fabric\u7ec4\u4ef6"),"\u3002"))),(0,a.kt)(l.ZP,{mdxType:"BetaTS"}),(0,a.kt)("p",null,"\u867d\u7136\u6700\u540e\u4e00\u6b65\u5bf9\u4e8e\u6240\u6709\u5e73\u53f0\u90fd\u662f\u76f8\u540c\u7684\uff0c\u4f46\u524d\u4e24\u6b65\u5728iOS\u548cAndroid\u4e0a\u662f\u4e0d\u540c\u7684\u3002"),(0,a.kt)("h2",f({},{id:"\u914d\u7f6e-fabric-\u539f\u751f\u7ec4\u4ef6\u4f9d\u8d56"}),"\u914d\u7f6e Fabric \u539f\u751f\u7ec4\u4ef6\u4f9d\u8d56"),(0,a.kt)("h3",f({},{id:"ios"}),(0,a.kt)("a",{name:"dependencies-ios"}),"iOS"),(0,a.kt)("p",null,"Apple \u5e73\u53f0\u4f7f\u7528 ",(0,a.kt)("a",f({parentName:"p"},{href:"https://cocoapods.org"}),"Cocoapods")," \u4f5c\u4e3a\u4f9d\u8d56\u7ba1\u7406\u5668\u6765\u5b89\u88c5 Fabric \u539f\u751f\u7ec4\u4ef6\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u60a8\u5df2\u7ecf\u5728\u4f7f\u7528",(0,a.kt)("a",f({parentName:"p"},{href:"https://github.com/facebook/react-native/blob/main/packages/react-native/scripts/react_native_pods.rb#L198"}),(0,a.kt)("inlineCode",{parentName:"a"},"install_module_dependencies")),"\u51fd\u6570\uff0c\u90a3\u4e48",(0,a.kt)("strong",{parentName:"p"},"\u65e0\u9700\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c"),"\u3002\u8be5\u51fd\u6570\u5df2\u7ecf\u5728\u542f\u7528\u65b0\u67b6\u6784\u65f6\u81ea\u52a8\u5b89\u88c5\u9002\u5f53\u7684\u4f9d\u8d56\u9879\uff0c\u5e76\u5728\u672a\u542f\u7528\u65f6\u907f\u514d\u5b83\u4eec\u3002"),(0,a.kt)("p",null,"\u5426\u5219\uff0c\u60a8\u7684 Fabric \u539f\u751f\u7ec4\u4ef6\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"podspec"),"\u5e94\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-ruby"}),'require "json"\n\npackage = JSON.parse(File.read(File.join(__dir__, "package.json")))\n\nfolly_compiler_flags = \'-DFOLLY_NO_CONFIG -DFOLLY_MOBILE=1 -DFOLLY_USE_LIBCPP=1 -Wno-comma -Wno-shorten-64-to-32\'\n\nPod::Spec.new do |s|\n  # Default fields for a valid podspec\n  s.name            = "<FC Name>"\n  s.version         = package["version"]\n  s.summary         = package["description"]\n  s.description     = package["description"]\n  s.homepage        = package["homepage"]\n  s.license         = package["license"]\n  s.platforms       = { :ios => "11.0" }\n  s.author          = package["author"]\n  s.source          = { :git => package["repository"], :tag => "#{s.version}" }\n\n  s.source_files    = "ios/**/*.{h,m,mm,swift}"\n  # React Native Core dependency\n  s.dependency "React-Core"\n\n  #\xa0The following lines are required by the New Architecture.\n  s.compiler_flags = folly_compiler_flags + " -DRCT_NEW_ARCH_ENABLED=1"\n  s.pod_target_xcconfig    = {\n      "HEADER_SEARCH_PATHS" => "\\"$(PODS_ROOT)/boost\\"",\n      "OTHER_CPLUSPLUSFLAGS" => "-DFOLLY_NO_CONFIG -DFOLLY_MOBILE=1 -DFOLLY_USE_LIBCPP=1",\n      "CLANG_CXX_LANGUAGE_STANDARD" => "c++17"\n  }\n\n  s.dependency "React-RCTFabric"\n  s.dependency "React-Codegen"\n  s.dependency "RCT-Folly"\n  s.dependency "RCTRequired"\n  s.dependency "RCTTypeSafety"\n  s.dependency "ReactCommon/turbomodule/core"\nend\n')),(0,a.kt)("p",null,"\u5f53\u542f\u7528\u65b0\u67b6\u6784\u65f6\uff0c\u5e94\u5b89\u88c5\u989d\u5916\u7684\u4f9d\u8d56\u9879\uff0c\u5e76\u5728\u672a\u542f\u7528\u65f6\u907f\u514d\u5b89\u88c5\u5b83\u4eec\u3002\n\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("a",f({parentName:"p"},{href:"https://github.com/facebook/react-native/blob/main/packages/react-native/scripts/react_native_pods.rb#L198"}),(0,a.kt)("inlineCode",{parentName:"a"},"install_modules_dependencies")),"\u3002\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u66f4\u65b0 ",(0,a.kt)("inlineCode",{parentName:"p"},".podspec")," \u6587\u4ef6\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-diff"}),'require "json"\n\npackage = JSON.parse(File.read(File.join(__dir__, "package.json")))\n\n- folly_compiler_flags = \'-DFOLLY_NO_CONFIG -DFOLLY_MOBILE=1 -DFOLLY_USE_LIBCPP=1 -Wno-comma -Wno-shorten-64-to-32\'\n\nPod::Spec.new do |s|\n  # Default fields for a valid podspec\n  s.name            = "<FC Name>"\n  s.version         = package["version"]\n  s.summary         = package["description"]\n  s.description     = package["description"]\n  s.homepage        = package["homepage"]\n  s.license         = package["license"]\n  s.platforms       = { :ios => "11.0" }\n  s.author          = package["author"]\n  s.source          = { :git => package["repository"], :tag => "#{s.version}" }\n\n  s.source_files    = "ios/**/*.{h,m,mm,swift}"\n  # React Native Core dependency\n+  install_modules_dependencies(s)\n-  s.dependency "React-Core"\n-  #\xa0The following lines are required by the New Architecture.\n-  s.compiler_flags = folly_compiler_flags + " -DRCT_NEW_ARCH_ENABLED=1"\n-  s.pod_target_xcconfig    = {\n-      "HEADER_SEARCH_PATHS" => "\\"$(PODS_ROOT)/boost\\"",\n-      "OTHER_CPLUSPLUSFLAGS" => "-DFOLLY_NO_CONFIG -DFOLLY_MOBILE=1 -DFOLLY_USE_LIBCPP=1",\n-      "CLANG_CXX_LANGUAGE_STANDARD" => "c++17"\n-  }\n-\n-  s.dependency "React-RCTFabric"\n-  s.dependency "React-Codegen"\n-  s.dependency "RCT-Folly"\n-  s.dependency "RCTRequired"\n-  s.dependency "RCTTypeSafety"\n-  s.dependency "ReactCommon/turbomodule/core"\nend\n')),(0,a.kt)("h3",f({},{id:"android"}),"Android"),(0,a.kt)("p",null,"\u8981\u521b\u5efa\u4e00\u4e2a\u5728\u4e24\u79cd\u67b6\u6784\u4e2d\u90fd\u80fd\u4f7f\u7528\u7684\u539f\u751f\u7ec4\u4ef6\uff0c\u60a8\u9700\u8981\u914d\u7f6e Gradle \u4ee5\u6839\u636e\u6240\u9009\u67b6\u6784\u9009\u62e9\u54ea\u4e9b\u6587\u4ef6\u9700\u8981\u7f16\u8bd1\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5728Gradle\u914d\u7f6e\u4e2d\u4f7f\u7528",(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u540c\u7684 sourceSets"),"\u6765\u5b9e\u73b0\u3002"),(0,a.kt)("admonition",f({},{title:"\u6ce8\u610f",type:"note"}),(0,a.kt)("p",{parentName:"admonition"},"\u8bf7\u6ce8\u610f\uff0c\u8fd9\u662f\u76ee\u524d\u5efa\u8bae\u7684\u65b9\u6cd5\u3002\u867d\u7136\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u4ee3\u7801\u91cd\u590d\uff0c\u4f46\u5b83\u5c06\u786e\u4fdd\u4e0e\u4e24\u79cd\u67b6\u6784\u7684\u6700\u5927\u517c\u5bb9\u6027\u3002\u60a8\u5c06\u5728\u4e0b\u4e00\u8282\u4e2d\u4e86\u89e3\u5982\u4f55\u51cf\u5c11\u91cd\u590d\u3002")),(0,a.kt)("p",null,"\u8981\u914d\u7f6e Fabric \u539f\u751f\u7ec4\u4ef6\u4ee5\u9009\u62e9\u6b63\u786e\u7684 sourceSet\uff0c\u60a8\u9700\u8981\u6309\u7167\u4ee5\u4e0b\u65b9\u5f0f\u66f4\u65b0 ",(0,a.kt)("inlineCode",{parentName:"p"},"build.gradle")," \u6587\u4ef6\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-diff",metastring:'title="build.gradle"',title:'"build.gradle"'}),"+// Add this function in case you don't have it already\n+ def isNewArchitectureEnabled() {\n+    return project.hasProperty(\"newArchEnabled\") && project.newArchEnabled == \"true\"\n+}\n// ... other parts of the build file\ndefaultConfig {\n        minSdkVersion safeExtGet('minSdkVersion', 21)\n        targetSdkVersion safeExtGet('targetSdkVersion', 31)\n+        buildConfigField(\"boolean\", \"IS_NEW_ARCHITECTURE_ENABLED\", isNewArchitectureEnabled().toString())\n+    }\n+\n+    sourceSets {\n+        main {\n+            if (isNewArchitectureEnabled()) {\n+                java.srcDirs += ['src/newarch']\n+            } else {\n+                java.srcDirs += ['src/oldarch']\n+            }\n+        }\n    }\n}\n")),(0,a.kt)("p",null,"\u8fd9\u4e9b\u66f4\u6539\u4e3b\u8981\u505a\u4e86\u4e09\u4e2a\u4e8b\u60c5\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u7b2c\u4e00\u884c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u8fd4\u56de\u65b0\u67b6\u6784\u662f\u5426\u5df2\u542f\u7528\u3002"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"buildConfigField")," \u884c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a ",(0,a.kt)("inlineCode",{parentName:"li"},"IS_NEW_ARCHITECTURE_ENABLED")," \u7684\u6784\u5efa\u914d\u7f6e\u5e03\u5c14\u5b57\u6bb5\uff0c\u5e76\u4f7f\u7528\u7b2c\u4e00\u6b65\u4e2d\u58f0\u660e\u7684\u51fd\u6570\u8fdb\u884c\u521d\u59cb\u5316\u3002\u8fd9\u5141\u8bb8\u60a8\u5728\u8fd0\u884c\u65f6\u68c0\u67e5\u7528\u6237\u662f\u5426\u6307\u5b9a\u4e86 ",(0,a.kt)("inlineCode",{parentName:"li"},"newArchEnabled")," \u5c5e\u6027\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u6700\u540e\u51e0\u884c\u5229\u7528\u7b2c\u4e00\u6b65\u4e2d\u58f0\u660e\u7684\u51fd\u6570\u6765\u51b3\u5b9a\u6211\u4eec\u9700\u8981\u6784\u5efa\u54ea\u4e9b\u6e90\u96c6\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6240\u9009\u62e9\u7684\u67b6\u6784\u3002")),(0,a.kt)("h2",f({},{id:"\u66f4\u65b0\u4ee3\u7801\u5e93"}),"\u66f4\u65b0\u4ee3\u7801\u5e93"),(0,a.kt)("h3",f({},{id:"ios-1"}),"iOS"),(0,a.kt)("p",null,"\u7b2c\u4e8c\u6b65\u662f\u6307\u793a Xcode \u5728\u6784\u5efa\u65e7\u67b6\u6784\u7684\u5e94\u7528\u7a0b\u5e8f\u65f6\u907f\u514d\u7f16\u8bd1\u6240\u6709\u4f7f\u7528\u65b0\u67b6\u6784\u7c7b\u578b\u548c\u6587\u4ef6\u7684\u884c\u3002"),(0,a.kt)("p",null,"Fabric \u539f\u751f\u7ec4\u4ef6\u9700\u8981\u4e00\u4e2a\u5934\u6587\u4ef6\u548c\u4e00\u4e2a\u5b9e\u73b0\u6587\u4ef6\u6765\u5c06\u5b9e\u9645\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"View"),"\u6dfb\u52a0\u5230\u6a21\u5757\u4e2d\u3002"),(0,a.kt)("p",null,"\u4f8b\u5982\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"RNMyComponentView.h"),"\u5934\u6587\u4ef6\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-objectivec",metastring:"title='RNMyComponentView.h'",title:"'RNMyComponentView.h'"}),"#import <React/RCTViewComponentView.h>\n#import <UIKit/UIKit.h>\n\n#ifndef NativeComponentExampleComponentView_h\n#define NativeComponentExampleComponentView_h\n\nNS_ASSUME_NONNULL_BEGIN\n\n@interface RNMyComponentView : RCTViewComponentView\n@end\n\nNS_ASSUME_NONNULL_END\n\n#endif /* NativeComponentExampleComponentView_h */\n")),(0,a.kt)("p",null,"The implementation ",(0,a.kt)("inlineCode",{parentName:"p"},"RNMyComponentView.mm")," file, instead, could look like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-objectivec",metastring:"title='RNMyComponentView.mm'",title:"'RNMyComponentView.mm'"}),'#import "RNMyComponentView.h"\n\n// <react/renderer imports>\n\n#import "RCTFabricComponentsPlugins.h"\n\nusing namespace facebook::react;\n\n@interface RNMyComponentView () <RCTMyComponentViewViewProtocol>\n\n@end\n\n@implementation RNMyComponentView {\n    UIView * _view;\n}\n\n+ (ComponentDescriptorProvider)componentDescriptorProvider\n{\n    // ... return the descriptor ...\n}\n\n- (instancetype)initWithFrame:(CGRect)frame\n{\n  // ... initialize the object ...\n}\n\n- (void)updateProps:(Props::Shared const &)props oldProps:(Props::Shared const &)oldProps\n{\n  // ... set up the props ...\n\n  [super updateProps:props oldProps:oldProps];\n}\n\nClass<RCTComponentViewProtocol> MyComponentViewCls(void)\n{\n  return RNMyComponentView.class;\n}\n\n@end\n')),(0,a.kt)("p",null,"\u4e3a\u4e86\u786e\u4fdd Xcode \u8df3\u8fc7\u8fd9\u4e9b\u6587\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u4eec",(0,a.kt)("strong",{parentName:"p"},"\u540c\u65f6"),"\u5305\u542b\u5728\u4e00\u4e9b ",(0,a.kt)("inlineCode",{parentName:"p"},"#ifdef RCT_NEW_ARCH_ENABLED")," \u7f16\u8bd1\u6307\u4ee4\u4e2d\u3002\u4f8b\u5982\uff0c\u5934\u6587\u4ef6\u53ef\u4ee5\u6309\u4ee5\u4e0b\u65b9\u5f0f\u66f4\u6539\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-diff"}),"+ #ifdef RCT_NEW_ARCH_ENABLED\n#import <React/RCTViewComponentView.h>\n#import <UIKit/UIKit.h>\n\n// ... rest of the header file ...\n\n#endif /* NativeComponentExampleComponentView_h */\n+ #endif\n")),(0,a.kt)("p",null,"\u5728\u5b9e\u73b0\u6587\u4ef6\u4e2d\uff0c\u5e94\u5c06\u76f8\u540c\u7684\u4e24\u884c\u4ee3\u7801\u6dfb\u52a0\u4e3a\u7b2c\u4e00\u884c\u548c\u6700\u540e\u4e00\u884c\u3002"),(0,a.kt)("p",null,"\u4e0a\u9762\u7684\u7247\u6bb5\u4f7f\u7528\u4e86\u4e0e\u524d\u4e00\u4e2a",(0,a.kt)("a",f({parentName:"p"},{href:"#dependencies-ios"}),"\u90e8\u5206"),"\u4e2d\u4f7f\u7528\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"RCT_NEW_ARCH_ENABLED"),"\u6807\u5fd7\u76f8\u540c\u3002\u5f53\u672a\u8bbe\u7f6e\u6b64\u6807\u5fd7\u65f6\uff0cXcode\u5728\u7f16\u8bd1\u671f\u95f4\u8df3\u8fc7",(0,a.kt)("inlineCode",{parentName:"p"},"#ifdef"),"\u5185\u7684\u4ee3\u7801\uff0c\u5e76\u4e14\u4e0d\u5c06\u5176\u5305\u542b\u5230\u5df2\u7f16\u8bd1\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u3002\u5df2\u7f16\u8bd1\u4e8c\u8fdb\u5236\u6587\u4ef6\u5c06\u5177\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"RNMyComponentView.o")," \u5bf9\u8c61\uff0c\u4f46\u5b83\u5c06\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u3002"),(0,a.kt)("h3",f({},{id:"android-1"}),"Android"),(0,a.kt)("p",null,"\u7531\u4e8e\u5728 Android \u4e0a\u65e0\u6cd5\u4f7f\u7528\u6761\u4ef6\u7f16\u8bd1\u5757\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u5b9a\u4e49\u4e24\u4e2a\u4e0d\u540c\u7684\u6e90\u96c6\u3002\u8fd9\u5c06\u5141\u8bb8\u521b\u5efa\u4e00\u4e2a\u5411\u540e\u517c\u5bb9\u7684 TurboModule\uff0c\u5e76\u6839\u636e\u6240\u4f7f\u7528\u7684\u67b6\u6784\u52a0\u8f7d\u548c\u7f16\u8bd1\u9002\u5f53\u7684\u6e90\u3002"),(0,a.kt)("p",null,"\u56e0\u6b64\uff0c\u60a8\u9700\u8981\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5728 ",(0,a.kt)("inlineCode",{parentName:"li"},"src/oldarch")," \u8def\u5f84\u4e2d\u521b\u5efa\u4e00\u4e2a\u4f20\u7edf\u539f\u751f\u7ec4\u4ef6\u3002\u8bf7\u53c2\u9605 ",(0,a.kt)("a",f({parentName:"li"},{href:"../native-components-android"}),"\u6b64\u6307\u5357")," \u4ee5\u4e86\u89e3\u5982\u4f55\u521b\u5efa\u4f20\u7edf\u539f\u751f\u7ec4\u4ef6\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u5728 ",(0,a.kt)("inlineCode",{parentName:"li"},"src/newarch")," \u8def\u5f84\u4e2d\u521b\u5efa\u4e00\u4e2a Fabric \u539f\u751f\u7ec4\u4ef6\u3002\u8bf7\u53c2\u9605 ",(0,a.kt)("a",f({parentName:"li"},{href:"pillars-fabric-components"}),"\u6b64\u6307\u5357")," \u4ee5\u4e86\u89e3\u5982\u4f55\u521b\u5efa Fabric \u539f\u751f\u7ec4\u4ef6\u3002")),(0,a.kt)("p",null,"\u7136\u540e\u6307\u793a Gradle \u51b3\u5b9a\u9009\u62e9\u54ea\u4e2a\u5b9e\u73b0\u3002"),(0,a.kt)("p",null,"\u4e00\u4e9b\u6587\u4ef6\u53ef\u4ee5\u5728 Legacy \u548c Fabric \u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\uff1a\u8fd9\u4e9b\u6587\u4ef6\u5e94\u8be5\u88ab\u521b\u5efa\u6216\u79fb\u52a8\u5230\u4e24\u79cd\u67b6\u6784\u90fd\u52a0\u8f7d\u7684\u6587\u4ef6\u5939\u4e2d\u3002\u8fd9\u4e9b\u6587\u4ef6\u5305\u62ec\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"<MyComponentView>.java")," \u5b9e\u4f8b\u5316\u5e76\u914d\u7f6e\u7528\u4e8e\u4e24\u4e2a\u7ec4\u4ef6\u7684 Android View \u7684\u4ee3\u7801\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"<MyComponentView>ManagerImpl.java")," \u6587\u4ef6\u5305\u542b\u53ef\u5728\u4f20\u7edf\u548c Fabric \u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\u7684 ViewManager \u7684\u903b\u8f91\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"<MyComponentView>Package.java")," \u6587\u4ef6\u7528\u4e8e\u52a0\u8f7d\u7ec4\u4ef6\u3002")),(0,a.kt)("p",null,"\u6700\u7ec8\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-sh"}),"my-component\n\u251c\u2500\u2500 android\n\u2502   \u251c\u2500\u2500 build.gradle\n\u2502   \u2514\u2500\u2500 src\n\u2502       \u251c\u2500\u2500 main\n\u2502       \u2502   \u251c\u2500\u2500 AndroidManifest.xml\n\u2502       \u2502   \u2514\u2500\u2500 java\n\u2502       \u2502       \u2514\u2500\u2500 com\n\u2502       \u2502           \u2514\u2500\u2500 mycomponent\n\u2502       \u2502               \u251c\u2500\u2500 MyComponentView.java\n\u2502       \u2502               \u251c\u2500\u2500 MyComponentViewManagerImpl.java\n\u2502       \u2502               \u2514\u2500\u2500 MyComponentViewPackage.java\n\u2502       \u251c\u2500\u2500 newarch\n\u2502       \u2502   \u2514\u2500\u2500 java\n\u2502       \u2502       \u2514\u2500\u2500 com\n\u2502       \u2502           \u2514\u2500\u2500 MyComponentViewManager.java\n\u2502       \u2514\u2500\u2500 oldarch\n\u2502           \u2514\u2500\u2500 java\n\u2502               \u2514\u2500\u2500 com\n\u2502                   \u2514\u2500\u2500 MyComponentViewManager.java\n\u251c\u2500\u2500 ios\n\u251c\u2500\u2500 js\n\u2514\u2500\u2500 package.json\n")),(0,a.kt)("p",null,"\u5e94\u8be5\u653e\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"MyComponentViewManagerImpl.java"),"\u4e2d\u7684\u4ee3\u7801\u53ef\u4ee5\u5728\u539f\u751f\u7ec4\u4ef6\u548c Fabric \u539f\u751f\u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\uff0c\u4f8b\u5982\uff1a"),(0,a.kt)(r.Z,{groupId:"android-language",queryString:!0,defaultValue:i.Z.defaultAndroidLanguage,values:i.Z.androidLanguages,mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"java",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-java",metastring:'title="example of MyComponentViewManager.java"',title:'"example',of:!0,'MyComponentViewManager.java"':!0}),'package com.mycomponent;\n\nimport androidx.annotation.Nullable;\nimport com.facebook.react.uimanager.ThemedReactContext;\n\npublic class MyComponentViewManagerImpl {\n\n    public static final String NAME = "MyComponent";\n\n    public static MyComponentView createViewInstance(ThemedReactContext context) {\n        return new MyComponentView(context);\n    }\n\n    public static void setFoo(MyComponentView view, String param) {\n        // \u4f7f\u7528\u4f20\u9012\u7684\u89c6\u56fe\u548c\u53c2\u6570\u5b9e\u73b0 foo \u51fd\u6570\u7684\u903b\u8f91\u3002\n    }\n}\n'))),(0,a.kt)(o.Z,{value:"kotlin",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-kotlin",metastring:'title="example of MyComponentViewManager.kt"',title:'"example',of:!0,'MyComponentViewManager.kt"':!0}),'package com.mycomponent\n\nimport com.facebook.react.uimanager.ThemedReactContext\n\nobject MyComponentViewManagerImpl {\n  const val NAME = "MyComponent"\n  fun createViewInstance(context: ThemedReactContext?) = MyComponentView(context)\n\n  fun setFoo(view: MyComponentView, param: String) {\n    // \u4f7f\u7528\u4f20\u9012\u7684\u89c6\u56fe\u548c\u53c2\u6570\u5b9e\u73b0 foo \u51fd\u6570\u7684\u903b\u8f91\u3002\n  }\n}\n')))),(0,a.kt)("p",null,"\u7136\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u5171\u4eab\u7ba1\u7406\u5668\u4e2d\u58f0\u660e\u7684\u51fd\u6570\u66f4\u65b0\u4f20\u7edf\u539f\u751f\u7ec4\u4ef6\u548c Fabric \u539f\u751f\u7ec4\u4ef6\u3002"),(0,a.kt)("p",null,"\u4f8b\u5982\uff0c\u5728\u4f20\u7edf\u539f\u751f\u7ec4\u4ef6\u4e2d\uff1a"),(0,a.kt)(r.Z,{groupId:"android-language",queryString:!0,defaultValue:i.Z.defaultAndroidLanguage,values:i.Z.androidLanguages,mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"java",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-java",metastring:'title="Native Component using the ViewManagerImpl"',title:'"Native',Component:!0,using:!0,the:!0,'ViewManagerImpl"':!0}),'public class MyComponentViewManager extends SimpleViewManager<MyComponentView> {\n\n    ReactApplicationContext mCallerContext;\n\n    public MyComponentViewManager(ReactApplicationContext reactContext) {\n        mCallerContext = reactContext;\n    }\n\n    @Override\n    public String getName() {\n        // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001\u540d\u79f0\u5c5e\u6027\n        return MyComponentViewManagerImpl.NAME;\n    }\n\n    @Override\n    public MyComponentView createViewInstance(ThemedReactContext context) {\n        // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001createViewInstance\u51fd\u6570\n        return MyComponentViewManagerImpl.createViewInstance(context);\n    }\n\n    @ReactProp(name = "foo")\n    public void setFoo(MyComponentView view, String param) {\n        //// \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001\u81ea\u5b9a\u4e49\u51fd\u6570\n        MyComponentViewManagerImpl.setFoo(view, param);\n    }\n\n}\n'))),(0,a.kt)(o.Z,{value:"kotlin",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-kotlin",metastring:'title="Native Component using the ViewManagerImpl"',title:'"Native',Component:!0,using:!0,the:!0,'ViewManagerImpl"':!0}),'class MyComponentViewManager(var context: ReactApplicationContext) : SimpleViewManager<MyComponentView>() {\n  // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001\u540d\u79f0\u5c5e\u6027\n  override fun getName() = MyComponentViewManagerImpl.NAME\n\n  public override fun createViewInstance(context: ThemedReactContext): MyComponentView =\n    // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001createViewInstance\u51fd\u6570\n    MyComponentViewManagerImpl.createViewInstance(context)\n\n  @ReactProp(name = "foo")\n  fun setFoo(view: MyComponentView, param: String) {\n    // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001\u81ea\u5b9a\u4e49\u51fd\u6570\n    MyComponentViewManagerImpl.setFoo(view, param)\n  }\n}\n')))),(0,a.kt)("p",null,"\u5728 Fabric \u539f\u751f\u7ec4\u4ef6\u4e2d\uff1a"),(0,a.kt)(r.Z,{groupId:"android-language",queryString:!0,defaultValue:i.Z.defaultAndroidLanguage,values:i.Z.androidLanguages,mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"java",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-java",metastring:'title="Fabric Component using the ViewManagerImpl"',title:'"Fabric',Component:!0,using:!0,the:!0,'ViewManagerImpl"':!0}),'// \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001\u540d\u79f0\u5c5e\u6027\n@ReactModule(name = MyComponentViewManagerImpl.NAME)\npublic class MyComponentViewManager extends SimpleViewManager<MyComponentView>\n        implements MyComponentViewManagerInterface<MyComponentView> {\n\n    private final ViewManagerDelegate<MyComponentView> mDelegate;\n\n    public MyComponentViewManager(ReactApplicationContext context) {\n        mDelegate = new MyComponentViewManagerDelegate<>(this);\n    }\n\n    @Nullable\n    @Override\n    protected ViewManagerDelegate<MyComponentView> getDelegate() {\n        return mDelegate;\n    }\n\n    @NonNull\n    @Override\n    public String getName() {\n        // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001\u540d\u79f0\u5c5e\u6027\n        return MyComponentViewManagerImpl.NAME;\n    }\n\n    @NonNull\n    @Override\n    protected MyComponentView createViewInstance(@NonNull ThemedReactContext context) {\n        // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001createViewInstance\u51fd\u6570\n        return MyComponentViewManagerImpl.createViewInstance(context);\n    }\n\n    @Override\n    @ReactProp(name = "foo")\n    public void setFoo(MyComponentView view, @Nullable String param) {\n       // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001\u81ea\u5b9a\u4e49\u51fd\u6570\n        MyComponentViewManagerImpl.setFoo(view, param);\n    }\n}\n'))),(0,a.kt)(o.Z,{value:"kotlin",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-kotlin",metastring:'title="Fabric Component using the ViewManagerImpl"',title:'"Fabric',Component:!0,using:!0,the:!0,'ViewManagerImpl"':!0}),'// \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001\u540d\u79f0\u5c5e\u6027\n@ReactModule(name = MyComponentViewManagerImpl.NAME)\nclass MyComponentViewManager(context: ReactApplicationContext) : SimpleViewManager<MyComponentView>(), MyComponentViewManagerInterface<MyComponentView> {\n  private val delegate: ViewManagerDelegate<MyComponentView> = MyComponentViewManagerDelegate(this)\n\n  override fun getDelegate(): ViewManagerDelegate<MyComponentView> = delegate\n\n  // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001\u540d\u79f0\u5c5e\u6027\n  override fun getName(): String = MyComponentViewManagerImpl.NAME\n\n  override fun createViewInstance(context: ThemedReactContext): MyComponentView =\n    // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001createViewInstance\u51fd\u6570\n    MyComponentViewManagerImpl.createViewInstance(context)\n\n  @ReactProp(name = "foo")\n  override fun setFoo(view: MyComponentView, text: String) {\n    // \u4ece\u5171\u4eab\u5b9e\u73b0\u4e2d\u83b7\u53d6\u9759\u6001\u81ea\u5b9a\u4e49\u51fd\u6570\n    MyComponentViewManagerImpl.setFoo(view, param);\n  }\n}\n')))),(0,a.kt)("p",null,"\u60f3\u8981\u4e86\u89e3\u5982\u4f55\u4e00\u6b65\u6b65\u5b9e\u73b0\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u67e5\u770b",(0,a.kt)("a",f({parentName:"p"},{href:"https://github.com/react-native-community/RNNewArchitectureLibraries/tree/feat/back-fabric-comp"}),"\u6b64\u793a\u8303\u4ed3\u5e93"),"\u3002"),(0,a.kt)("h2",f({},{id:"\u7edf\u4e00-javascript-\u89c4\u8303"}),"\u7edf\u4e00 JavaScript \u89c4\u8303"),(0,a.kt)(l.ZP,{mdxType:"BetaTS"}),(0,a.kt)("p",null,"\u6700\u540e\u4e00\u6b65\u786e\u4fdd JavaScript \u72ec\u7acb\u4e8e\u6240\u9009\u67b6\u6784\u3002"),(0,a.kt)("p",null,"\u5bf9\u4e8e Fabric \u539f\u751f\u7ec4\u4ef6\uff0c\u5173\u952e\u70b9\u662f",(0,a.kt)("inlineCode",{parentName:"p"},"<YourModule>NativeComponent.js"),"(\u6216",(0,a.kt)("inlineCode",{parentName:"p"},".ts"),")\u89c4\u8303\u6587\u4ef6\u3002\u5e94\u7528\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bbf\u95ee\u89c4\u8303\u6587\u4ef6\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-ts"}),"import MyComponent from 'your-component/src/index';\n")),(0,a.kt)("p",null,"\u7531\u4e8e ",(0,a.kt)("inlineCode",{parentName:"p"},"codegenNativeComponent")," \u5728\u5e95\u5c42\u8c03\u7528\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"requireNativeComponent"),"\uff0c\u6211\u4eec\u9700\u8981\u91cd\u65b0\u5bfc\u51fa\u7ec4\u4ef6\uff0c\u4ee5\u907f\u514d\u591a\u6b21\u6ce8\u518c\u3002"),(0,a.kt)(r.Z,{groupId:"fabric-component-backward-compatibility",queryString:!0,defaultValue:i.Z.defaultFabricComponentSpecLanguage,values:i.Z.fabricComponentSpecLanguages,mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"Flow",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-ts"}),"// @flow\nexport default require('./MyComponentNativeComponent').default;\n"))),(0,a.kt)(o.Z,{value:"TypeScript",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",f({parentName:"pre"},{className:"language-ts"}),"export default require('./MyComponentNativeComponent').default;\n")))))}h.isMDXComponent=!0}}]);